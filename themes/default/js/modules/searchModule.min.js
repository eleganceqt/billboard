(function(c,b,a){c(function(){const d={$wrapper:c(".billboardSearch__wrapper"),skeleton:{attributes:{namespace:{module:"billboardFrontendSearch"},selector:{notLoading:":not(.loading)",notActive:":not(.active)"},className:{loading:"loading"},messages:{internalError:"500 Internal Server Error"}},computed:{namespace:{event:function(){return"."+d.skeleton.attributes.namespace.module}}},methods:{set:{loading:function(e){e.addClass(d.skeleton.attributes.className.loading)},disabled:function(e){e.addClass(d.skeleton.attributes.className.disabled)}},unset:{loading:function(e){e.removeClass(d.skeleton.attributes.className.loading)},disabled:function(e){e.removeClass(d.skeleton.attributes.className.disabled)}}}},components:{search:{input:{selector:{form:".billboardSearch--input-form",input:'input[name="query"]'},event:{submit:{onForm:function(e){e.preventDefault();d.$wrapper.trigger("searchRefine")}}}},filters:{selector:{form:".billboardSearch--filters-form",categoriesDropdown:".ui.categories.dropdown",citiesDropdown:".ui.cities.dropdown",priceFrom:".price-from",priceTo:".price-to",priceInput:".price_input"},event:{input:{onPrice:function(e){let $input=c(this);let price=$input.val().replace(/\D/g,"");$input.val(price)}},submit:{onForm:function(e){e.preventDefault();d.$wrapper.trigger("searchRefine")}}}},event:{custom:{onSearchRefine:function(e){b.location.href=d.components.search.buildRedirectUrl()}}},buildRedirectUrl:function(){let urlParams=this.buildUrlParams();return d.$wrapper.data("search-url")+(urlParams?"?"+urlParams:"")},buildUrlParams:function(){let data={query:d.components.search.serialize.query(),category_id:d.components.search.serialize.categoryId(),city_id:d.components.search.serialize.cityId(),price_from:d.components.search.serialize.price.from(),price_to:d.components.search.serialize.price.to()};return c.param(d.components.search.sanitize(data))},serialize:{query:function(){return c.trim(c(d.components.search.input.selector.form).find(d.components.search.input.selector.input).val())},categoryId:function(){return c.trim(c(d.components.search.filters.selector.categoriesDropdown).dropdown("get value"))},cityId:function(){return c.trim(c(d.components.search.filters.selector.citiesDropdown).dropdown("get value"))},price:{from:function(){return c.trim(c(d.components.search.filters.selector.form).find(d.components.search.filters.selector.priceFrom).val())},to:function(){return c.trim(c(d.components.search.filters.selector.form).find(d.components.search.filters.selector.priceTo).val())}}},sanitize:function(e){let sanitized={};c.each(e,function(f,g){if(c.trim(g)!==""){sanitized[f]=g}});return sanitized}}},events:{bind:{all:function(){this.direct();this.delegated()},direct:function(){let eventnamespace=d.skeleton.computed.namespace.event();d.$wrapper.on("searchRefine"+eventnamespace,d.components.search.event.custom.onSearchRefine)},delegated:function(){let eventnamespace=d.skeleton.computed.namespace.event();d.$wrapper.on("submit"+eventnamespace,d.components.search.input.selector.form,d.components.search.input.event.submit.onForm).on("input"+eventnamespace,d.components.search.filters.selector.priceInput,d.components.search.filters.event.input.onPrice).on("submit"+eventnamespace,d.components.search.filters.selector.form,d.components.search.filters.event.submit.onForm)}}},semantic:{initialize:function(){this.elements.dropdown.initialize()},elements:{dropdown:{settings:{match:"text",selectOnKeydown:false,forceSelection:false,message:{noResults:"Результатов не найдено."}},initialize:function(){this.categories.initialize();this.cities.initialize()},categories:{initialize:function(){c(".ui.categories.dropdown").dropdown(d.semantic.elements.dropdown.settings)}},cities:{initialize:function(){c(".ui.cities.dropdown").dropdown(d.semantic.elements.dropdown.settings)}}}}},initialize:function(){this.semantic.initialize();this.events.bind.all()}};d.initialize()})}(jQuery,window,document));