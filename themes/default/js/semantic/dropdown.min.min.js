!function(d,c,b,a){c=void 0!==c&&c.Math==Math?c:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),d.fn.dropdown=function(n){var l,p=d(this),h=d(b),m=p.selector||"",g="ontouchstart" in b.documentElement,o=(new Date).getTime(),f=[],e=n,i="string"==typeof e,k=[].slice.call(arguments,1);return p.each(function(aj){var ar,ad,an,aw,ai,ae,af,ak,ao=d.isPlainObject(n)?d.extend(!0,{},d.fn.dropdown.settings,n):d.extend({},d.fn.dropdown.settings),ap=ao.className,au=ao.message,al=ao.fields,ah=ao.keys,av=ao.metadata,ac=ao.namespace,at=ao.regExp,aa=ao.selector,ab=ao.error,aq=ao.templates,Z="."+ac,W="module-"+ac,B=d(this),Y=d(ao.context),X=B.find(aa.text),z=B.find(aa.search),am=B.find(aa.sizer),K=B.find(aa.input),N=B.find(aa.icon),U=0<B.prev().find(aa.text).length?B.prev().find(aa.text):B.prev(),ag=B.children(aa.menu),G=ag.find(aa.item),H=!1,j=!1,Q=!1,J=this,P=B.data(W);ak={initialize:function(){ak.debug("Initializing dropdown",ao),ak.is.alreadySetup()?ak.setup.reference():(ak.setup.layout(),ao.values&&ak.change.values(ao.values),ak.refreshData(),ak.save.defaults(),ak.restore.selected(),ak.create.id(),ak.bind.events(),ak.observeChanges(),ak.instantiate())},instantiate:function(){ak.verbose("Storing instance of dropdown",ak),P=ak,B.data(W,ak)},destroy:function(){ak.verbose("Destroying previous dropdown",B),ak.remove.tabbable(),B.off(Z).removeData(W),ag.off(Z),h.off(aw),ak.disconnect.menuObserver(),ak.disconnect.selectObserver()},observeChanges:function(){"MutationObserver" in c&&(ae=new MutationObserver(ak.event.select.mutation),af=new MutationObserver(ak.event.menu.mutation),ak.debug("Setting up mutation observer",ae,af),ak.observe.select(),ak.observe.menu())},disconnect:{menuObserver:function(){af&&af.disconnect()},selectObserver:function(){ae&&ae.disconnect()}},observe:{select:function(){ak.has.input()&&ae.observe(B[0],{childList:!0,subtree:!0})},menu:function(){ak.has.menu()&&af.observe(ag[0],{childList:!0,subtree:!0})}},create:{id:function(){ai=(Math.random().toString(16)+"000000000").substr(2,8),aw="."+ai,ak.verbose("Creating unique id for element",ai)},userChoice:function(s){var t,r,q;return !!(s=s||ak.get.userValues())&&(s=d.isArray(s)?s:[s],d.each(s,function(v,u){!1===ak.get.item(u)&&(q=ao.templates.addition(ak.add.variables(au.addResult,u)),r=d("<div />").html(q).attr("data-"+av.value,u).attr("data-"+av.text,u).addClass(ap.addition).addClass(ap.item),ao.hideAdditions&&r.addClass(ap.hidden),t=t===a?r:t.add(r),ak.verbose("Creating user choices for value",u,r))}),t)},userLabels:function(r){var q=ak.get.userValues();q&&(ak.debug("Adding user labels",q),d.each(q,function(u,s){ak.verbose("Adding custom user value"),ak.add.label(s,s)}))},menu:function(){ag=d("<div />").addClass(ap.menu).appendTo(B)},sizer:function(){am=d("<span />").addClass(ap.sizer).insertAfter(z)}},search:function(q){q=q!==a?q:ak.get.query(),ak.verbose("Searching for query",q),ak.has.minCharacters(q)?ak.filter(q):ak.hide()},select:{firstUnfiltered:function(){ak.verbose("Selecting first non-filtered element"),ak.remove.selectedItem(),G.not(aa.unselectable).not(aa.addition+aa.hidden).eq(0).addClass(ap.selected)},nextAvailable:function(r){var q=(r=r.eq(0)).nextAll(aa.item).not(aa.unselectable).eq(0),s=r.prevAll(aa.item).not(aa.unselectable).eq(0);0<q.length?(ak.verbose("Moving selection to",q),q.addClass(ap.selected)):(ak.verbose("Moving selection to",s),s.addClass(ap.selected))}},setup:{api:function(){var q={debug:ao.debug,urlData:{value:ak.get.value(),query:ak.get.query()},on:!1};ak.verbose("First request, initializing API"),B.api(q)},layout:function(){B.is("select")&&(ak.setup.select(),ak.setup.returnedObject()),ak.has.menu()||ak.create.menu(),ak.is.search()&&!ak.has.search()&&(ak.verbose("Adding search input"),z=d("<input />").addClass(ap.search).prop("autocomplete","off").insertBefore(X)),ak.is.multiple()&&ak.is.searchSelection()&&!ak.has.sizer()&&ak.create.sizer(),ao.allowTab&&ak.set.tabbable()},select:function(){var q=ak.get.selectValues();ak.debug("Dropdown initialized on a select",q),B.is("select")&&(K=B),0<K.parent(aa.dropdown).length?(ak.debug("UI dropdown already exists. Creating dropdown menu only"),B=K.closest(aa.dropdown),ak.has.menu()||ak.create.menu(),ag=B.children(aa.menu),ak.setup.menu(q)):(ak.debug("Creating entire dropdown from select"),B=d("<div />").attr("class",K.attr("class")).addClass(ap.selection).addClass(ap.dropdown).html(aq.dropdown(q)).insertBefore(K),K.hasClass(ap.multiple)&&!1===K.prop("multiple")&&(ak.error(ab.missingMultiple),K.prop("multiple",!0)),K.is("[multiple]")&&ak.set.multiple(),K.prop("disabled")&&(ak.debug("Disabling dropdown"),B.addClass(ap.disabled)),K.removeAttr("class").detach().prependTo(B)),ak.refresh()},menu:function(q){ag.html(aq.menu(q,al)),G=ag.find(aa.item)},reference:function(){ak.debug("Dropdown behavior was called on select, replacing with closest dropdown"),B=B.parent(aa.dropdown),P=B.data(W),J=B.get(0),ak.refresh(),ak.setup.returnedObject()},returnedObject:function(){var r=p.slice(0,aj),q=p.slice(aj+1);p=r.add(B).add(q)}},refresh:function(){ak.refreshSelectors(),ak.refreshData()},refreshItems:function(){G=ag.find(aa.item)},refreshSelectors:function(){ak.verbose("Refreshing selector cache"),X=B.find(aa.text),z=B.find(aa.search),K=B.find(aa.input),N=B.find(aa.icon),U=0<B.prev().find(aa.text).length?B.prev().find(aa.text):B.prev(),ag=B.children(aa.menu),G=ag.find(aa.item)},refreshData:function(){ak.verbose("Refreshing cached metadata"),G.removeData(av.text).removeData(av.value)},clearData:function(){ak.verbose("Clearing metadata"),G.removeData(av.text).removeData(av.value),B.removeData(av.defaultText).removeData(av.defaultValue).removeData(av.placeholderText)},toggle:function(){ak.verbose("Toggling menu visibility"),ak.is.active()?ak.hide():ak.show()},show:function(q){if(q=d.isFunction(q)?q:function(){},!ak.can.show()&&ak.is.remote()&&(ak.debug("No API results retrieved, searching before show"),ak.queryRemote(ak.get.query(),ak.show)),ak.can.show()&&!ak.is.active()){if(ak.debug("Showing dropdown"),!ak.has.message()||ak.has.maxSelections()||ak.has.allResultsFiltered()||ak.remove.message(),ak.is.allFiltered()){return !0}!1!==ao.onShow.call(J)&&ak.animate.show(function(){ak.can.click()&&ak.bind.intent(),ak.has.menuSearch()&&ak.focusSearch(),ak.set.visible(),q.call(J)})}},hide:function(q){q=d.isFunction(q)?q:function(){},ak.is.active()&&!ak.is.animatingOutward()&&(ak.debug("Hiding dropdown"),!1!==ao.onHide.call(J)&&ak.animate.hide(function(){ak.remove.visible(),q.call(J)}))},hideOthers:function(){ak.verbose("Finding other dropdowns to hide"),p.not(B).has(aa.menu+"."+ap.visible).dropdown("hide")},hideMenu:function(){ak.verbose("Hiding menu  instantaneously"),ak.remove.active(),ak.remove.visible(),ag.transition("hide")},hideSubMenus:function(){var q=ag.children(aa.item).find(aa.menu);ak.verbose("Hiding sub menus",q),q.transition("hide")},bind:{events:function(){g&&ak.bind.touchEvents(),ak.bind.keyboardEvents(),ak.bind.inputEvents(),ak.bind.mouseEvents()},touchEvents:function(){ak.debug("Touch device detected binding additional touch events"),ak.is.searchSelection()||ak.is.single()&&B.on("touchstart"+Z,ak.event.test.toggle),ag.on("touchstart"+Z,aa.item,ak.event.item.mouseenter)},keyboardEvents:function(){ak.verbose("Binding keyboard events"),B.on("keydown"+Z,ak.event.keydown),ak.has.search()&&B.on(ak.get.inputEvent()+Z,aa.search,ak.event.input),ak.is.multiple()&&h.on("keydown"+aw,ak.event.document.keydown)},inputEvents:function(){ak.verbose("Binding input change events"),B.on("change"+Z,aa.input,ak.event.change)},mouseEvents:function(){ak.verbose("Binding mouse events"),ak.is.multiple()&&B.on("click"+Z,aa.label,ak.event.label.click).on("click"+Z,aa.remove,ak.event.remove.click),ak.is.searchSelection()?(B.on("mousedown"+Z,ak.event.mousedown).on("mouseup"+Z,ak.event.mouseup).on("mousedown"+Z,aa.menu,ak.event.menu.mousedown).on("mouseup"+Z,aa.menu,ak.event.menu.mouseup).on("click"+Z,aa.icon,ak.event.icon.click).on("focus"+Z,aa.search,ak.event.search.focus).on("click"+Z,aa.search,ak.event.search.focus).on("blur"+Z,aa.search,ak.event.search.blur).on("click"+Z,aa.text,ak.event.text.focus),ak.is.multiple()&&B.on("click"+Z,ak.event.click)):("click"==ao.on?B.on("click"+Z,ak.event.test.toggle):"hover"==ao.on?B.on("mouseenter"+Z,ak.delay.show).on("mouseleave"+Z,ak.delay.hide):B.on(ao.on+Z,ak.toggle),B.on("click"+Z,aa.icon,ak.event.icon.click).on("mousedown"+Z,ak.event.mousedown).on("mouseup"+Z,ak.event.mouseup).on("focus"+Z,ak.event.focus),ak.has.menuSearch()?B.on("blur"+Z,aa.search,ak.event.search.blur):B.on("blur"+Z,ak.event.blur)),ag.on("mouseenter"+Z,aa.item,ak.event.item.mouseenter).on("mouseleave"+Z,aa.item,ak.event.item.mouseleave).on("click"+Z,aa.item,ak.event.item.click)},intent:function(){ak.verbose("Binding hide intent event to document"),g&&h.on("touchstart"+aw,ak.event.test.touch).on("touchmove"+aw,ak.event.test.touch),h.on("click"+aw,ak.event.test.hide)}},unbind:{intent:function(){ak.verbose("Removing hide intent event from document"),g&&h.off("touchstart"+aw).off("touchmove"+aw),h.off("click"+aw)}},filter:function(r){var q=r!==a?r:ak.get.query(),s=function(){ak.is.multiple()&&ak.filterActive(),(r||!r&&0==ak.get.activeItem().length)&&ak.select.firstUnfiltered(),ak.has.allResultsFiltered()?ao.onNoResults.call(J,q)?ao.allowAdditions?ao.hideAdditions&&(ak.verbose("User addition with no menu, setting empty style"),ak.set.empty(),ak.hideMenu()):(ak.verbose("All items filtered, showing message",q),ak.add.message(au.noResults)):(ak.verbose("All items filtered, hiding dropdown",q),ak.hideMenu()):(ak.remove.empty(),ak.remove.message()),ao.allowAdditions&&ak.add.userSuggestion(r),ak.is.searchSelection()&&ak.can.show()&&ak.is.focusedOnSearch()&&ak.show()};ao.useLabels&&ak.has.maxSelections()||(ao.apiSettings?ak.can.useAPI()?ak.queryRemote(q,function(){ao.filterRemoteData&&ak.filterItems(q),s()}):ak.error(ab.noAPI):(ak.filterItems(q),s()))},queryRemote:function(r,s){var q={errorDuration:!1,cache:"local",throttle:ao.throttle,urlData:{query:r},onError:function(){ak.add.message(au.serverError),s()},onFailure:function(){ak.add.message(au.serverError),s()},onSuccess:function(v){var u=v[al.remoteValues];d.isArray(u)&&0<u.length?(ak.remove.message(),ak.setup.menu({values:v[al.remoteValues]})):ak.add.message(au.noResults),s()}};B.api("get request")||ak.setup.api(),q=d.extend(!0,{},q,ao.apiSettings),B.api("setting",q).api("query")},filterItems:function(u){var s=u!==a?u:ak.get.query(),q=null,r=ak.escape.string(s),v=new RegExp("^"+r,"igm");ak.has.query()&&(q=[],ak.verbose("Searching for matching values",s),G.each(function(){var x,w,y=d(this);if("both"==ao.match||"text"==ao.match){if(-1!==(x=String(ak.get.choiceText(y,!1))).search(v)){return q.push(this),!0}if("exact"===ao.fullTextSearch&&ak.exactSearch(s,x)){return q.push(this),!0}if(!0===ao.fullTextSearch&&ak.fuzzySearch(s,x)){return q.push(this),!0}}if("both"==ao.match||"value"==ao.match){if(-1!==(w=String(ak.get.choiceValue(y,x))).search(v)){return q.push(this),!0}if("exact"===ao.fullTextSearch&&ak.exactSearch(s,w)){return q.push(this),!0}if(!0===ao.fullTextSearch&&ak.fuzzySearch(s,w)){return q.push(this),!0}}})),ak.debug("Showing only matched items",s),ak.remove.filteredItem(),q&&G.not(q).addClass(ap.filtered)},fuzzySearch:function(w,u){var y=u.length,r=w.length;if(w=w.toLowerCase(),u=u.toLowerCase(),y<r){return !1}if(r===y){return w===u}w:for(var q=0,x=0;q<r;q++){for(var v=w.charCodeAt(q);x<y;){if(u.charCodeAt(x++)===v){continue w}}return !1}return !0},exactSearch:function(r,q){return r=r.toLowerCase(),-1<(q=q.toLowerCase()).indexOf(r)},filterActive:function(){ao.useLabels&&G.filter("."+ap.active).addClass(ap.filtered)},focusSearch:function(q){ak.has.search()&&!ak.is.focusedOnSearch()&&(q?(B.off("focus"+Z,aa.search),z.focus(),B.on("focus"+Z,aa.search,ak.event.search.focus)):z.focus())},forceSelection:function(){var r=G.not(ap.filtered).filter("."+ap.selected).eq(0),q=G.not(ap.filtered).filter("."+ap.active).eq(0),s=0<r.length?r:q;if(0<s.length&&!ak.is.multiple()){return ak.debug("Forcing partial selection to selected item",s),void ak.event.item.click.call(s,{},!0)}ao.allowAdditions&&ak.set.selected(ak.get.query()),ak.remove.searchTerm()},change:{values:function(q){ao.allowAdditions||ak.clear(),ak.debug("Creating dropdown with specified values",q),ak.setup.menu({values:q}),d.each(q,function(s,r){if(1==r.selected){return ak.debug("Setting initial selection to",r.value),ak.set.selected(r.value),!0}})}},event:{change:function(){Q||(ak.debug("Input changed, updating selection"),ak.set.selected())},focus:function(){ao.showOnFocus&&!H&&ak.is.hidden()&&!ad&&ak.show()},blur:function(q){ad=b.activeElement===this,H||ad||(ak.remove.activeLabel(),ak.hide())},mousedown:function(){ak.is.searchSelection()?an=!0:H=!0},mouseup:function(){ak.is.searchSelection()?an=!1:H=!1},click:function(q){d(q.target).is(B)&&(ak.is.focusedOnSearch()?ak.show():ak.focusSearch())},search:{focus:function(){H=!0,ak.is.multiple()&&ak.remove.activeLabel(),ao.showOnFocus&&ak.search()},blur:function(q){ad=b.activeElement===this,ak.is.searchSelection()&&!an&&(j||ad||(ao.forceSelection&&ak.forceSelection(),ak.hide())),an=!1}},icon:{click:function(q){N.hasClass(ap.clear)?ak.clear():ak.can.click()&&ak.toggle()}},text:{focus:function(q){H=!0,ak.focusSearch()}},input:function(q){(ak.is.multiple()||ak.is.searchSelection())&&ak.set.filtered(),clearTimeout(ak.timer),ak.timer=setTimeout(ak.search,ao.delay.search)},label:{click:function(w){var u=d(this),y=B.find(aa.label),r=y.filter("."+ap.active),q=u.nextAll("."+ap.active),x=u.prevAll("."+ap.active),v=0<q.length?u.nextUntil(q).add(r).add(u):u.prevUntil(x).add(r).add(u);w.shiftKey?(r.removeClass(ap.active),v.addClass(ap.active)):w.ctrlKey?u.toggleClass(ap.active):(r.removeClass(ap.active),u.addClass(ap.active)),ao.onLabelSelect.apply(this,y.filter("."+ap.active))}},remove:{click:function(){var q=d(this).parent();q.hasClass(ap.active)?ak.remove.activeLabels():ak.remove.activeLabels(q)}},test:{toggle:function(r){var q=ak.is.multiple()?ak.show:ak.toggle;ak.is.bubbledLabelClick(r)||ak.is.bubbledIconClick(r)||ak.determine.eventOnElement(r,q)&&r.preventDefault()},touch:function(q){ak.determine.eventOnElement(q,function(){"touchstart"==q.type?ak.timer=setTimeout(function(){ak.hide()},ao.delay.touch):"touchmove"==q.type&&clearTimeout(ak.timer)}),q.stopPropagation()},hide:function(q){ak.determine.eventInModule(q,ak.hide)}},select:{mutation:function(q){ak.debug("<select> modified, recreating menu");var r=!1;d.each(q,function(u,s){if(d(s.target).is("select")||d(s.addedNodes).is("select")){return r=!0}}),r&&(ak.disconnect.selectObserver(),ak.refresh(),ak.setup.select(),ak.set.selected(),ak.observe.select())}},menu:{mutation:function(w){var u=w[0],y=u.addedNodes?d(u.addedNodes[0]):d(!1),r=u.removedNodes?d(u.removedNodes[0]):d(!1),q=y.add(r),x=q.is(aa.addition)||0<q.closest(aa.addition).length,v=q.is(aa.message)||0<q.closest(aa.message).length;x||v?(ak.debug("Updating item selector cache"),ak.refreshItems()):(ak.debug("Menu modified, updating selector cache"),ak.refresh())},mousedown:function(){j=!0},mouseup:function(){j=!1}},item:{mouseenter:function(u){var s=d(u.target),w=d(this),r=w.children(aa.menu),q=w.siblings(aa.item).children(aa.menu),v=0<r.length;!(0<r.find(s).length)&&v&&(clearTimeout(ak.itemTimer),ak.itemTimer=setTimeout(function(){ak.verbose("Showing sub-menu",r),d.each(q,function(){ak.animate.hide(!1,d(this))}),ak.animate.show(!1,r)},ao.delay.show),u.preventDefault())},mouseleave:function(r){var q=d(this).children(aa.menu);0<q.length&&(clearTimeout(ak.itemTimer),ak.itemTimer=setTimeout(function(){ak.verbose("Hiding sub-menu",q),ak.animate.hide(!1,q)},ao.delay.hide))},click:function(y,C){var v=d(this),x=d(y?y.target:""),A=v.find(aa.menu),u=ak.get.choiceText(v),D=ak.get.choiceValue(v,u),q=0<A.length,w=0<A.find(x).length;ak.has.menuSearch()&&d(b.activeElement).blur(),w||q&&!ao.allowCategorySelection||(ak.is.searchSelection()&&(ao.allowAdditions&&ak.remove.userAddition(),ak.remove.searchTerm(),ak.is.focusedOnSearch()||1==C||ak.focusSearch(!0)),ao.useLabels||(ak.remove.filteredItem(),ak.set.scrollPosition(v)),ak.determine.selectAction.call(this,u,D))}},document:{keydown:function(D){var O=D.which;if(ak.is.inObject(O,ah)){var x=B.find(aa.label),A=x.filter("."+ap.active),I=(A.data(av.value),x.index(A)),w=x.length,R=0<A.length,q=1<A.length,y=0===I,F=I+1==w,M=ak.is.searchSelection(),E=ak.is.focusedOnSearch(),L=ak.is.focused(),C=E&&0===ak.get.caretPosition();if(M&&!R&&!E){return}O==ah.leftArrow?!L&&!C||R?R&&(D.shiftKey?ak.verbose("Adding previous label to selection"):(ak.verbose("Selecting previous label"),x.removeClass(ap.active)),y&&!q?A.addClass(ap.active):A.prev(aa.siblingLabel).addClass(ap.active).end(),D.preventDefault()):(ak.verbose("Selecting previous label"),x.last().addClass(ap.active)):O==ah.rightArrow?(L&&!R&&x.first().addClass(ap.active),R&&(D.shiftKey?ak.verbose("Adding next label to selection"):(ak.verbose("Selecting next label"),x.removeClass(ap.active)),F?M?E?x.removeClass(ap.active):ak.focusSearch():q?A.next(aa.siblingLabel).addClass(ap.active):A.addClass(ap.active):A.next(aa.siblingLabel).addClass(ap.active),D.preventDefault())):O==ah.deleteKey||O==ah.backspace?R?(ak.verbose("Removing active labels"),F&&M&&!E&&ak.focusSearch(),A.last().next(aa.siblingLabel).addClass(ap.active),ak.remove.activeLabels(A),D.preventDefault()):C&&!R&&O==ah.backspace&&(ak.verbose("Removing last label on input backspace"),A=x.last().addClass(ap.active),ak.remove.activeLabels(A)):A.removeClass(ap.active)}}},keydown:function(D){var O=D.which;if(ak.is.inObject(O,ah)){var x,A=G.not(aa.unselectable).filter("."+ap.selected).eq(0),I=ag.children("."+ap.active).eq(0),w=0<A.length?A:I,R=0<w.length?w.siblings(":not(."+ap.filtered+")").addBack():ag.children(":not(."+ap.filtered+")"),q=w.children(aa.menu),y=w.closest(aa.menu),F=y.hasClass(ap.visible)||y.hasClass(ap.animating)||0<y.parent(aa.menu).length,M=0<q.length,E=0<w.length,L=0<w.not(aa.unselectable).length,C=O==ah.delimiter&&ao.allowAdditions&&ak.is.multiple();if(ao.allowAdditions&&ao.hideAdditions&&(O==ah.enter||C)&&L&&(ak.verbose("Selecting item from keyboard shortcut",w),ak.event.item.click.call(w,D),ak.is.searchSelection()&&ak.remove.searchTerm()),ak.is.visible()){if((O==ah.enter||C)&&(O==ah.enter&&E&&M&&!ao.allowCategorySelection?(ak.verbose("Pressed enter on unselectable category, opening sub menu"),O=ah.rightArrow):L&&(ak.verbose("Selecting item from keyboard shortcut",w),ak.event.item.click.call(w,D),ak.is.searchSelection()&&ak.remove.searchTerm()),D.preventDefault()),E&&(O==ah.leftArrow&&y[0]!==ag[0]&&(ak.verbose("Left key pressed, closing sub-menu"),ak.animate.hide(!1,y),w.removeClass(ap.selected),y.closest(aa.item).addClass(ap.selected),D.preventDefault()),O==ah.rightArrow&&M&&(ak.verbose("Right key pressed, opening sub-menu"),ak.animate.show(!1,q),w.removeClass(ap.selected),q.find(aa.item).eq(0).addClass(ap.selected),D.preventDefault())),O==ah.upArrow){if(x=E&&F?w.prevAll(aa.item+":not("+aa.unselectable+")").eq(0):G.eq(0),R.index(x)<0){return ak.verbose("Up key pressed but reached top of current menu"),void D.preventDefault()}ak.verbose("Up key pressed, changing active item"),w.removeClass(ap.selected),x.addClass(ap.selected),ak.set.scrollPosition(x),ao.selectOnKeydown&&ak.is.single()&&ak.set.selectedItem(x),D.preventDefault()}if(O==ah.downArrow){if(0===(x=E&&F?x=w.nextAll(aa.item+":not("+aa.unselectable+")").eq(0):G.eq(0)).length){return ak.verbose("Down key pressed but reached bottom of current menu"),void D.preventDefault()}ak.verbose("Down key pressed, changing active item"),G.removeClass(ap.selected),x.addClass(ap.selected),ak.set.scrollPosition(x),ao.selectOnKeydown&&ak.is.single()&&ak.set.selectedItem(x),D.preventDefault()}O==ah.pageUp&&(ak.scrollPage("up"),D.preventDefault()),O==ah.pageDown&&(ak.scrollPage("down"),D.preventDefault()),O==ah.escape&&(ak.verbose("Escape key pressed, closing dropdown"),ak.hide())}else{C&&D.preventDefault(),O!=ah.downArrow||ak.is.visible()||(ak.verbose("Down key pressed, showing dropdown"),ak.show(),D.preventDefault())}}else{ak.has.search()||ak.set.selectedLetter(String.fromCharCode(O))}}},trigger:{change:function(){var r=b.createEvent("HTMLEvents"),q=K[0];q&&(ak.verbose("Triggering native change event"),r.initEvent("change",!0,!1),q.dispatchEvent(r))}},determine:{selectAction:function(r,q){ak.verbose("Determining action",ao.action),d.isFunction(ak.action[ao.action])?(ak.verbose("Triggering preset action",ao.action,r,q),ak.action[ao.action].call(J,r,q,this)):d.isFunction(ao.action)?(ak.verbose("Triggering user action",ao.action,r,q),ao.action.call(J,r,q,this)):ak.error(ab.action,ao.action)},eventInModule:function(u,s){var v=d(u.target),r=0<v.closest(b.documentElement).length,q=0<v.closest(B).length;return s=d.isFunction(s)?s:function(){},r&&!q?(ak.verbose("Triggering event",s),s(),!0):(ak.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(w,u){var y=d(w.target),r=y.closest(aa.siblingLabel),q=b.body.contains(w.target),x=0===B.find(r).length,v=0===y.closest(ag).length;return u=d.isFunction(u)?u:function(){},q&&x&&v?(ak.verbose("Triggering event",u),u(),!0):(ak.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(r,q,s){if(q=q!==a?q:r,ak.can.activate(d(s))){if(ak.set.selected(q,d(s)),ak.is.multiple()&&!ak.is.allFiltered()){return}ak.hideAndClear()}},select:function(r,q,s){if(q=q!==a?q:r,ak.can.activate(d(s))){if(ak.set.value(q,r,d(s)),ak.is.multiple()&&!ak.is.allFiltered()){return}ak.hideAndClear()}},combo:function(r,q,s){q=q!==a?q:r,ak.set.selected(q,d(s)),ak.hideAndClear()},hide:function(r,q,s){ak.set.value(q,r,d(s)),ak.hideAndClear()}},get:{id:function(){return ai},defaultText:function(){return B.data(av.defaultText)},defaultValue:function(){return B.data(av.defaultValue)},placeholderText:function(){return"auto"!=ao.placeholder&&"string"==typeof ao.placeholder?ao.placeholder:B.data(av.placeholderText)||""},text:function(){return X.text()},query:function(){return d.trim(z.val())},searchWidth:function(q){return q=q!==a?q:z.val(),am.text(q),Math.ceil(am.width()+1)},selectionCount:function(){var q=ak.get.values();return ak.is.multiple()?d.isArray(q)?q.length:0:""!==ak.get.value()?1:0},transition:function(q){return"auto"==ao.transition?ak.is.upward(q)?"slide up":"slide down":ao.transition},userValues:function(){var q=ak.get.values();return !!q&&(q=d.isArray(q)?q:[q],d.grep(q,function(r){return !1===ak.get.item(r)}))},uniqueArray:function(q){return d.grep(q,function(s,r){return d.inArray(s,q)===r})},caretPosition:function(){var r,q,s=z.get(0);return"selectionStart" in s?s.selectionStart:b.selection?(s.focus(),q=(r=b.selection.createRange()).text.length,r.moveStart("character",-s.value.length),r.text.length-q):void 0},value:function(){var r=0<K.length?K.val():B.data(av.value),q=d.isArray(r)&&1===r.length&&""===r[0];return r===a||q?"":r},values:function(){var q=ak.get.value();return""===q?"":!ak.has.selectInput()&&ak.is.multiple()?"string"==typeof q?q.split(ao.delimiter):"":q},remoteValues:function(){var r=ak.get.values(),q=!1;return r&&("string"==typeof r&&(r=[r]),d.each(r,function(u,s){var v=ak.read.remoteData(s);ak.verbose("Restoring value from session data",v,s),v&&(q||(q={}),q[s]=v)})),q},choiceText:function(r,q){if(q=q!==a?q:ao.preserveHTML,r){return 0<r.find(aa.menu).length&&(ak.verbose("Retrieving text of element with sub-menu"),(r=r.clone()).find(aa.menu).remove(),r.find(aa.menuIcon).remove()),r.data(av.text)!==a?r.data(av.text):q?d.trim(r.html()):d.trim(r.text())}},choiceValue:function(r,q){return q=q||ak.get.choiceText(r),!!r&&(r.data(av.value)!==a?String(r.data(av.value)):"string"==typeof q?d.trim(q.toLowerCase()):String(q))},inputEvent:function(){var q=z[0];return !!q&&(q.oninput!==a?"input":q.onpropertychange!==a?"propertychange":"keyup")},selectValues:function(){var q={values:[]};return B.find("option").each(function(){var u=d(this),s=u.html(),v=u.attr("disabled"),r=u.attr("value")!==a?u.attr("value"):s;"auto"===ao.placeholder&&""===r?q.placeholder=s:q.values.push({name:s,value:r,disabled:v})}),ao.placeholder&&"auto"!==ao.placeholder&&(ak.debug("Setting placeholder value to",ao.placeholder),q.placeholder=ao.placeholder),ao.sortSelect?(q.values.sort(function(s,r){return s.name>r.name?1:-1}),ak.debug("Retrieved and sorted values from select",q)):ak.debug("Retrieved values from select",q),q},activeItem:function(){return G.filter("."+ap.active)},selectedItem:function(){var q=G.not(aa.unselectable).filter("."+ap.selected);return 0<q.length?q:G.eq(0)},itemWithAdditions:function(r){var q=ak.get.item(r),s=ak.create.userChoice(r);return s&&0<s.length&&(q=0<q.length?q.add(s):s),q},item:function(r,q){var u,v,t=!1;return r=r!==a?r:ak.get.values()!==a?ak.get.values():ak.get.text(),u=v?0<r.length:r!==a&&null!==r,v=ak.is.multiple()&&d.isArray(r),q=""===r||0===r||(q||!1),u&&G.each(function(){var w=d(this),s=ak.get.choiceText(w),x=ak.get.choiceValue(w,s);if(null!==x&&x!==a){if(v){-1===d.inArray(String(x),r)&&-1===d.inArray(s,r)||(t=t?t.add(w):w)}else{if(q){if(ak.verbose("Ambiguous dropdown value using strict type check",w,r),x===r||s===r){return t=w,!0}}else{if(String(x)==String(r)||s==r){return ak.verbose("Found select item by value",x,r),t=w,!0}}}}}),t}},check:{maxSelections:function(q){return !ao.maxSelections||((q=q!==a?q:ak.get.selectionCount())>=ao.maxSelections?(ak.debug("Maximum selection count reached"),ao.useLabels&&(G.addClass(ap.filtered),ak.add.message(au.maxSelections)),!0):(ak.verbose("No longer at maximum selection count"),ak.remove.message(),ak.remove.filteredItem(),ak.is.searchSelection()&&ak.filterItems(),!1))}},restore:{defaults:function(){ak.clear(),ak.restore.defaultText(),ak.restore.defaultValue()},defaultText:function(){var q=ak.get.defaultText();q===ak.get.placeholderText?(ak.debug("Restoring default placeholder text",q),ak.set.placeholderText(q)):(ak.debug("Restoring default text",q),ak.set.text(q))},placeholderText:function(){ak.set.placeholderText()},defaultValue:function(){var q=ak.get.defaultValue();q!==a&&(ak.debug("Restoring default value",q),""!==q?(ak.set.value(q),ak.set.selected()):(ak.remove.activeItem(),ak.remove.selectedItem()))},labels:function(){ao.allowAdditions&&(ao.useLabels||(ak.error(ab.labels),ao.useLabels=!0),ak.debug("Restoring selected values"),ak.create.userLabels()),ak.check.maxSelections()},selected:function(){ak.restore.values(),ak.is.multiple()?(ak.debug("Restoring previously selected values and labels"),ak.restore.labels()):ak.debug("Restoring previously selected values")},values:function(){ak.set.initialLoad(),ao.apiSettings&&ao.saveRemoteData&&ak.get.remoteValues()?ak.restore.remoteValues():ak.set.selected(),ak.remove.initialLoad()},remoteValues:function(){var q=ak.get.remoteValues();ak.debug("Recreating selected from session data",q),q&&(ak.is.single()?d.each(q,function(s,r){ak.set.text(r)}):d.each(q,function(s,r){ak.add.label(s,r)}))}},read:{remoteData:function(r){var q;if(c.Storage!==a){return(q=sessionStorage.getItem(r))!==a&&q}ak.error(ab.noStorage)}},save:{defaults:function(){ak.save.defaultText(),ak.save.placeholderText(),ak.save.defaultValue()},defaultValue:function(){var q=ak.get.value();ak.verbose("Saving default value as",q),B.data(av.defaultValue,q)},defaultText:function(){var q=ak.get.text();ak.verbose("Saving default text as",q),B.data(av.defaultText,q)},placeholderText:function(){var q;!1!==ao.placeholder&&X.hasClass(ap.placeholder)&&(q=ak.get.text(),ak.verbose("Saving placeholder text as",q),B.data(av.placeholderText,q))},remoteData:function(r,q){c.Storage!==a?(ak.verbose("Saving remote data to session storage",q,r),sessionStorage.setItem(q,r)):ak.error(ab.noStorage)}},clear:function(){ak.is.multiple()&&ao.useLabels?ak.remove.labels():(ak.remove.activeItem(),ak.remove.selectedItem()),ak.set.placeholderText(),ak.clearValue()},clearValue:function(){ak.set.value("")},scrollPage:function(A,I){var w,y,E=I||ak.get.selectedItem(),v=E.closest(aa.menu),L=v.outerHeight(),q=v.scrollTop(),x=G.eq(0).outerHeight(),D=Math.floor(L/x),F=(v.prop("scrollHeight"),"up"==A?q-x*D:q+x*D),C=G.not(aa.unselectable);y="up"==A?C.index(E)-D:C.index(E)+D,0<(w=("up"==A?0<=y:y<C.length)?C.eq(y):"up"==A?C.first():C.last()).length&&(ak.debug("Scrolling page",A,w),E.removeClass(ap.selected),w.addClass(ap.selected),ao.selectOnKeydown&&ak.is.single()&&ak.set.selectedItem(w),v.scrollTop(F))},set:{filtered:function(){var w=ak.is.multiple(),u=ak.is.searchSelection(),y=w&&u,r=u?ak.get.query():"",q="string"==typeof r&&0<r.length,x=ak.get.searchWidth(),v=""!==r;w&&q&&(ak.verbose("Adjusting input width",x,ao.glyphWidth),z.css("width",x)),q||y&&v?(ak.verbose("Hiding placeholder text"),X.addClass(ap.filtered)):(!w||y&&!v)&&(ak.verbose("Showing placeholder text"),X.removeClass(ap.filtered))},empty:function(){B.addClass(ap.empty)},loading:function(){B.addClass(ap.loading)},placeholderText:function(q){q=q||ak.get.placeholderText(),ak.debug("Setting placeholder text",q),ak.set.text(q),X.addClass(ap.placeholder)},tabbable:function(){ak.is.searchSelection()?(ak.debug("Added tabindex to searchable dropdown"),z.val("").attr("tabindex",0),ag.attr("tabindex",-1)):(ak.debug("Added tabindex to dropdown"),B.attr("tabindex")===a&&(B.attr("tabindex",0),ag.attr("tabindex",-1)))},initialLoad:function(){ak.verbose("Setting initial load"),ar=!0},activeItem:function(q){ao.allowAdditions&&0<q.filter(aa.addition).length?q.addClass(ap.filtered):q.addClass(ap.active)},partialSearch:function(r){var q=ak.get.query().length;z.val(r.substr(0,q))},scrollPosition:function(y,v){var C,u,q,A,w,x;C=(y=y||ak.get.selectedItem()).closest(aa.menu),u=y&&0<y.length,v=v!==a&&v,y&&0<C.length&&u&&(y.position().top,C.addClass(ap.loading),q=(A=C.scrollTop())-C.offset().top+y.offset().top,v||(x=A+C.height()<q+5,w=q-5<A),ak.debug("Scrolling to active item",q),(v||w||x)&&C.scrollTop(q),C.removeClass(ap.loading))},text:function(q){"select"!==ao.action&&("combo"==ao.action?(ak.debug("Changing combo button text",q,U),ao.preserveHTML?U.html(q):U.text(q)):(q!==ak.get.placeholderText()&&X.removeClass(ap.placeholder),ak.debug("Changing text",q,X),X.removeClass(ap.filtered),ao.preserveHTML?X.html(q):X.text(q)))},selectedItem:function(s){var r=ak.get.choiceValue(s),u=ak.get.choiceText(s,!1),q=ak.get.choiceText(s,!0);ak.debug("Setting user selection to item",s),ak.remove.activeItem(),ak.set.partialSearch(u),ak.set.activeItem(s),ak.set.selected(r,s),ak.set.text(q)},selectedLetter:function(u){var s,v=G.filter("."+ap.selected),r=0<v.length&&ak.has.firstLetter(v,u),q=!1;r&&(s=v.nextAll(G).eq(0),ak.has.firstLetter(s,u)&&(q=s)),q||G.each(function(){if(ak.has.firstLetter(d(this),u)){return q=d(this),!1}}),q&&(ak.verbose("Scrolling to next value with letter",u),ak.set.scrollPosition(q),v.removeClass(ap.selected),q.addClass(ap.selected),ao.selectOnKeydown&&ak.is.single()&&ak.set.selectedItem(q))},direction:function(q){"auto"==ao.direction?(ak.remove.upward(),ak.can.openDownward(q)?ak.remove.upward(q):ak.set.upward(q),ak.is.leftward(q)||ak.can.openRightward(q)||ak.set.leftward(q)):"upward"==ao.direction&&ak.set.upward(q)},upward:function(q){(q||B).addClass(ap.upward)},leftward:function(q){(q||ag).addClass(ap.leftward)},value:function(w,u,y){var r=ak.escape.value(w),q=0<K.length,x=ak.get.values(),v=w!==a?String(w):w;if(q){if(!ao.allowReselection&&v==x&&(ak.verbose("Skipping value update already same value",w,x),!ak.is.initialLoad())){return}ak.is.single()&&ak.has.selectInput()&&ak.can.extendSelect()&&(ak.debug("Adding user option",w),ak.add.optionValue(w)),ak.debug("Updating input value",r,x),Q=!0,K.val(r),!1===ao.fireOnInit&&ak.is.initialLoad()?ak.debug("Input native change event ignored on initial load"):ak.trigger.change(),Q=!1}else{ak.verbose("Storing value in metadata",r,K),r!==x&&B.data(av.value,v)}ak.is.single()&&ao.clearable&&(r?ak.set.clearable():ak.remove.clearable()),!1===ao.fireOnInit&&ak.is.initialLoad()?ak.verbose("No callback on initial load",ao.onChange):ao.onChange.call(J,w,u,y)},active:function(){B.addClass(ap.active)},multiple:function(){B.addClass(ap.multiple)},visible:function(){B.addClass(ap.visible)},exactly:function(r,q){ak.debug("Setting selected to exact values"),ak.clear(),ak.set.selected(r,q)},selected:function(t,s){var q=ak.is.multiple();(s=ao.allowAdditions?s||ak.get.itemWithAdditions(t):s||ak.get.item(t))&&(ak.debug("Setting selected menu item to",s),ak.is.multiple()&&ak.remove.searchWidth(),ak.is.single()?(ak.remove.activeItem(),ak.remove.selectedItem()):ao.useLabels&&ak.remove.selectedItem(),s.each(function(){var x=d(this),v=ak.get.choiceText(x),A=ak.get.choiceValue(x,v),u=x.hasClass(ap.filtered),r=x.hasClass(ap.active),y=x.hasClass(ap.addition),w=q&&1==s.length;q?!r||y?(ao.apiSettings&&ao.saveRemoteData&&ak.save.remoteData(v,A),ao.useLabels?(ak.add.label(A,v,w),ak.add.value(A,v,x),ak.set.activeItem(x),ak.filterActive(),ak.select.nextAvailable(s)):(ak.add.value(A,v,x),ak.set.text(ak.add.variables(au.count)),ak.set.activeItem(x))):u||(ak.debug("Selected active value, removing label"),ak.remove.selected(A)):(ao.apiSettings&&ao.saveRemoteData&&ak.save.remoteData(v,A),ak.set.text(v),ak.set.value(A,v,x),x.addClass(ap.active).addClass(ap.selected))}))},clearable:function(){N.addClass(ap.clear)}},add:{label:function(u,s,w){var r,q=ak.is.searchSelection()?z:X,v=ak.escape.value(u);ao.ignoreCase&&(v=v.toLowerCase()),r=d("<a />").addClass(ap.label).attr("data-"+av.value,v).html(aq.label(v,s)),r=ao.onLabelCreate.call(r,v,s),ak.has.label(u)?ak.debug("User selection already exists, skipping",v):(ao.label.variation&&r.addClass(ao.label.variation),!0===w?(ak.debug("Animating in label",r),r.addClass(ap.hidden).insertBefore(q).transition(ao.label.transition,ao.label.duration)):(ak.debug("Adding selection label",r),r.insertBefore(q)))},message:function(r){var q=ag.children(aa.message),s=ao.templates.message(ak.add.variables(r));0<q.length?q.html(s):q=d("<div/>").html(s).addClass(ap.message).appendTo(ag)},optionValue:function(r){var q=ak.escape.value(r);0<K.find('option[value="'+ak.escape.string(q)+'"]').length||(ak.disconnect.selectObserver(),ak.is.single()&&(ak.verbose("Removing previous user addition"),K.find("option."+ap.addition).remove()),d("<option/>").prop("value",q).addClass(ap.addition).html(r).appendTo(K),ak.verbose("Adding user addition as an <option>",r),ak.observe.select())},userSuggestion:function(u){var s,w=ag.children(aa.addition),r=ak.get.item(u),q=r&&r.not(aa.addition).length,v=0<w.length;ao.useLabels&&ak.has.maxSelections()||(""===u||q?w.remove():(v?(w.data(av.value,u).data(av.text,u).attr("data-"+av.value,u).attr("data-"+av.text,u).removeClass(ap.filtered),ao.hideAdditions||(s=ao.templates.addition(ak.add.variables(au.addResult,u)),w.html(s)),ak.verbose("Replacing user suggestion with new value",w)):((w=ak.create.userChoice(u)).prependTo(ag),ak.verbose("Adding item choice to menu corresponding with user choice addition",w)),ao.hideAdditions&&!ak.is.allFiltered()||w.addClass(ap.selected).siblings().removeClass(ap.selected),ak.refreshItems()))},variables:function(w,u){var y,r,q=-1!==w.search("{count}"),x=-1!==w.search("{maxCount}"),v=-1!==w.search("{term}");return ak.verbose("Adding templated variables to message",w),q&&(y=ak.get.selectionCount(),w=w.replace("{count}",y)),x&&(y=ak.get.selectionCount(),w=w.replace("{maxCount}",ao.maxSelections)),v&&(r=u||ak.get.query(),w=w.replace("{term}",r)),w},value:function(u,s,v){var r,q=ak.get.values();ak.has.value(u)?ak.debug("Value already selected"):""!==u?(r=d.isArray(q)?(r=q.concat([u]),ak.get.uniqueArray(r)):[u],ak.has.selectInput()?ak.can.extendSelect()&&(ak.debug("Adding value to select",u,r,K),ak.add.optionValue(u)):(r=r.join(ao.delimiter),ak.debug("Setting hidden input to delimited value",r,K)),!1===ao.fireOnInit&&ak.is.initialLoad()?ak.verbose("Skipping onadd callback on initial load",ao.onAdd):ao.onAdd.call(J,u,s,v),ak.set.value(r,u,s,v),ak.check.maxSelections()):ak.debug("Cannot select blank values from multiselect")}},remove:{active:function(){B.removeClass(ap.active)},activeLabel:function(){B.find(aa.label).removeClass(ap.active)},empty:function(){B.removeClass(ap.empty)},loading:function(){B.removeClass(ap.loading)},initialLoad:function(){ar=!1},upward:function(q){(q||B).removeClass(ap.upward)},leftward:function(q){(q||ag).removeClass(ap.leftward)},visible:function(){B.removeClass(ap.visible)},activeItem:function(){G.removeClass(ap.active)},filteredItem:function(){ao.useLabels&&ak.has.maxSelections()||(ao.useLabels&&ak.is.multiple()?G.not("."+ap.active).removeClass(ap.filtered):G.removeClass(ap.filtered),ak.remove.empty())},optionValue:function(r){var q=ak.escape.value(r),s=K.find('option[value="'+ak.escape.string(q)+'"]');0<s.length&&s.hasClass(ap.addition)&&(ae&&(ae.disconnect(),ak.verbose("Temporarily disconnecting mutation observer")),s.remove(),ak.verbose("Removing user addition as an <option>",q),ae&&ae.observe(K[0],{childList:!0,subtree:!0}))},message:function(){ag.children(aa.message).remove()},searchWidth:function(){z.css("width","")},searchTerm:function(){ak.verbose("Cleared search term"),z.val(""),ak.set.filtered()},userAddition:function(){G.filter(aa.addition).remove()},selected:function(r,q){if(!(q=ao.allowAdditions?q||ak.get.itemWithAdditions(r):q||ak.get.item(r))){return !1}q.each(function(){var u=d(this),s=ak.get.choiceText(u),v=ak.get.choiceValue(u,s);ak.is.multiple()?ao.useLabels?(ak.remove.value(v,s,u),ak.remove.label(v)):(ak.remove.value(v,s,u),0===ak.get.selectionCount()?ak.set.placeholderText():ak.set.text(ak.add.variables(au.count))):ak.remove.value(v,s,u),u.removeClass(ap.filtered).removeClass(ap.active),ao.useLabels&&u.removeClass(ap.selected)})},selectedItem:function(){G.removeClass(ap.selected)},value:function(u,s,v){var r,q=ak.get.values();ak.has.selectInput()?(ak.verbose("Input is <select> removing selected option",u),r=ak.remove.arrayValue(u,q),ak.remove.optionValue(u)):(ak.verbose("Removing from delimited values",u),r=(r=ak.remove.arrayValue(u,q)).join(ao.delimiter)),!1===ao.fireOnInit&&ak.is.initialLoad()?ak.verbose("No callback on initial load",ao.onRemove):ao.onRemove.call(J,u,s,v),ak.set.value(r,s,v),ak.check.maxSelections()},arrayValue:function(q,r){return d.isArray(r)||(r=[r]),r=d.grep(r,function(s){return q!=s}),ak.verbose("Removed value from delimited string",q,r),r},label:function(r,q){var s=B.find(aa.label).filter("[data-"+av.value+'="'+ak.escape.string(r)+'"]');ak.verbose("Removing label",s),s.remove()},activeLabels:function(q){q=q||B.find(aa.label).filter("."+ap.active),ak.verbose("Removing active label selections",q),ak.remove.labels(q)},labels:function(q){q=q||B.find(aa.label),ak.verbose("Removing labels",q),q.each(function(){var u=d(this),s=u.data(av.value),v=s!==a?String(s):s,r=ak.is.userValue(v);!1!==ao.onLabelRemove.call(u,s)?(ak.remove.message(),r?(ak.remove.value(v),ak.remove.label(v)):ak.remove.selected(v)):ak.debug("Label remove callback cancelled removal")})},tabbable:function(){ak.is.searchSelection()?(ak.debug("Searchable dropdown initialized"),z.removeAttr("tabindex")):(ak.debug("Simple selection dropdown initialized"),B.removeAttr("tabindex")),ag.removeAttr("tabindex")},clearable:function(){N.removeClass(ap.clear)}},has:{menuSearch:function(){return ak.has.search()&&0<z.closest(ag).length},search:function(){return 0<z.length},sizer:function(){return 0<am.length},selectInput:function(){return K.is("select")},minCharacters:function(q){return !ao.minCharacters||(q=q!==a?String(q):String(ak.get.query())).length>=ao.minCharacters},firstLetter:function(r,q){var s;return !(!r||0===r.length||"string"!=typeof q)&&(s=ak.get.choiceText(r,!1),(q=q.toLowerCase())==String(s).charAt(0).toLowerCase())},input:function(){return 0<K.length},items:function(){return 0<G.length},menu:function(){return 0<ag.length},message:function(){return 0!==ag.children(aa.message).length},label:function(r){var q=ak.escape.value(r),s=B.find(aa.label);return ao.ignoreCase&&(q=q.toLowerCase()),0<s.filter("[data-"+av.value+'="'+ak.escape.string(q)+'"]').length},maxSelections:function(){return ao.maxSelections&&ak.get.selectionCount()>=ao.maxSelections},allResultsFiltered:function(){var q=G.not(aa.addition);return q.filter(aa.unselectable).length===q.length},userSuggestion:function(){return 0<ag.children(aa.addition).length},query:function(){return""!==ak.get.query()},value:function(q){return ao.ignoreCase?ak.has.valueIgnoringCase(q):ak.has.valueMatchingCase(q)},valueMatchingCase:function(r){var q=ak.get.values();return !!(d.isArray(q)?q&&-1!==d.inArray(r,q):q==r)},valueIgnoringCase:function(s){var r=ak.get.values(),q=!1;return d.isArray(r)||(r=[r]),d.each(r,function(v,u){if(String(s).toLowerCase()==String(u).toLowerCase()){return !(q=!0)}}),q}},is:{active:function(){return B.hasClass(ap.active)},animatingInward:function(){return ag.transition("is inward")},animatingOutward:function(){return ag.transition("is outward")},bubbledLabelClick:function(q){return d(q.target).is("select, input")&&0<B.closest("label").length},bubbledIconClick:function(q){return 0<d(q.target).closest(N).length},alreadySetup:function(){return B.is("select")&&B.parent(aa.dropdown).data(W)!==a&&0===B.prev().length},animating:function(q){return q?q.transition&&q.transition("is animating"):ag.transition&&ag.transition("is animating")},leftward:function(q){return(q||ag).hasClass(ap.leftward)},disabled:function(){return B.hasClass(ap.disabled)},focused:function(){return b.activeElement===B[0]},focusedOnSearch:function(){return b.activeElement===z[0]},allFiltered:function(){return(ak.is.multiple()||ak.has.search())&&!(0==ao.hideAdditions&&ak.has.userSuggestion())&&!ak.has.message()&&ak.has.allResultsFiltered()},hidden:function(q){return !ak.is.visible(q)},initialLoad:function(){return ar},inObject:function(s,r){var q=!1;return d.each(r,function(v,u){if(u==s){return q=!0}}),q},multiple:function(){return B.hasClass(ap.multiple)},remote:function(){return ao.apiSettings&&ak.can.useAPI()},single:function(){return !ak.is.multiple()},selectMutation:function(q){var r=!1;return d.each(q,function(u,s){if(s.target&&d(s.target).is("select")){return r=!0}}),r},search:function(){return B.hasClass(ap.search)},searchSelection:function(){return ak.has.search()&&1===z.parent(aa.dropdown).length},selection:function(){return B.hasClass(ap.selection)},userValue:function(q){return -1!==d.inArray(q,ak.get.userValues())},upward:function(q){return(q||B).hasClass(ap.upward)},visible:function(q){return q?q.hasClass(ap.visible):ag.hasClass(ap.visible)},verticallyScrollableContext:function(){var q=Y.get(0)!==c&&Y.css("overflow-y");return"auto"==q||"scroll"==q},horizontallyScrollableContext:function(){var q=Y.get(0)!==c&&Y.css("overflow-X");return"auto"==q||"scroll"==q}},can:{activate:function(q){return !!ao.useLabels||(!ak.has.maxSelections()||!(!ak.has.maxSelections()||!q.hasClass(ap.active)))},openDownward:function(u){var s,v,r=u||ag,q=!0;return r.addClass(ap.loading),v={context:{offset:Y.get(0)===c?{top:0,left:0}:Y.offset(),scrollTop:Y.scrollTop(),height:Y.outerHeight()},menu:{offset:r.offset(),height:r.outerHeight()}},ak.is.verticallyScrollableContext()&&(v.menu.offset.top+=v.context.scrollTop),q=(s={above:v.context.scrollTop<=v.menu.offset.top-v.context.offset.top-v.menu.height,below:v.context.scrollTop+v.context.height>=v.menu.offset.top-v.context.offset.top+v.menu.height}).below?(ak.verbose("Dropdown can fit in context downward",s),!0):s.below||s.above?(ak.verbose("Dropdown cannot fit below, opening upward",s),!1):(ak.verbose("Dropdown cannot fit in either direction, favoring downward",s),!0),r.removeClass(ap.loading),q},openRightward:function(u){var s,v,r=u||ag,q=!0;return r.addClass(ap.loading),v={context:{offset:Y.get(0)===c?{top:0,left:0}:Y.offset(),scrollLeft:Y.scrollLeft(),width:Y.outerWidth()},menu:{offset:r.offset(),width:r.outerWidth()}},ak.is.horizontallyScrollableContext()&&(v.menu.offset.left+=v.context.scrollLeft),(s=v.menu.offset.left-v.context.offset.left+v.menu.width>=v.context.scrollLeft+v.context.width)&&(ak.verbose("Dropdown cannot fit in context rightward",s),q=!1),r.removeClass(ap.loading),q},click:function(){return g||"click"==ao.on},extendSelect:function(){return ao.allowAdditions||ao.apiSettings},show:function(){return !ak.is.disabled()&&(ak.has.items()||ak.has.message())},useAPI:function(){return d.fn.api!==a}},animate:{show:function(u,s){var v,r=s||ag,q=s?function(){}:function(){ak.hideSubMenus(),ak.hideOthers(),ak.set.active()};u=d.isFunction(u)?u:function(){},ak.verbose("Doing menu show animation",r),ak.set.direction(s),v=ak.get.transition(s),ak.is.selection()&&ak.set.scrollPosition(ak.get.selectedItem(),!0),(ak.is.hidden(r)||ak.is.animating(r))&&("none"==v?(q(),r.transition("show"),u.call(J)):d.fn.transition!==a&&B.transition("is supported")?r.transition({animation:v+" in",debug:ao.debug,verbose:ao.verbose,duration:ao.duration,queue:!0,onStart:q,onComplete:function(){u.call(J)}}):ak.error(ab.noTransition,v))},hide:function(u,s){var v=s||ag,r=(s?ao.duration:ao.duration,s?function(){}:function(){ak.can.click()&&ak.unbind.intent(),ak.remove.active()}),q=ak.get.transition(s);u=d.isFunction(u)?u:function(){},(ak.is.visible(v)||ak.is.animating(v))&&(ak.verbose("Doing menu hide animation",v),"none"==q?(r(),v.transition("hide"),u.call(J)):d.fn.transition!==a&&B.transition("is supported")?v.transition({animation:q+" out",duration:ao.duration,debug:ao.debug,verbose:ao.verbose,queue:!1,onStart:r,onComplete:function(){u.call(J)}}):ak.error(ab.transition))}},hideAndClear:function(){ak.remove.searchTerm(),ak.has.maxSelections()||(ak.has.search()?ak.hide(function(){ak.remove.filteredItem()}):ak.hide())},delay:{show:function(){ak.verbose("Delaying show event to ensure user intent"),clearTimeout(ak.timer),ak.timer=setTimeout(ak.show,ao.delay.show)},hide:function(){ak.verbose("Delaying hide event to ensure user intent"),clearTimeout(ak.timer),ak.timer=setTimeout(ak.hide,ao.delay.hide)}},escape:{value:function(u){var s=d.isArray(u),w="string"==typeof u,r=!w&&!s,q=w&&-1!==u.search(at.quote),v=[];return r||!q?u:(ak.debug("Encoding quote values for use in select",u),s?(d.each(u,function(y,x){v.push(x.replace(at.quote,"&quot;"))}),v):u.replace(at.quote,"&quot;"))},string:function(q){return(q=String(q)).replace(at.escape,"\\$&")}},setting:function(r,q){if(ak.debug("Changing setting",r,q),d.isPlainObject(r)){d.extend(!0,ao,r)}else{if(q===a){return ao[r]}d.isPlainObject(ao[r])?d.extend(!0,ao[r],q):ao[r]=q}},internal:function(r,q){if(d.isPlainObject(r)){d.extend(!0,ak,r)}else{if(q===a){return ak[r]}ak[r]=q}},debug:function(){!ao.silent&&ao.debug&&(ao.performance?ak.performance.log(arguments):(ak.debug=Function.prototype.bind.call(console.info,console,ao.name+":"),ak.debug.apply(console,arguments)))},verbose:function(){!ao.silent&&ao.verbose&&ao.debug&&(ao.performance?ak.performance.log(arguments):(ak.verbose=Function.prototype.bind.call(console.info,console,ao.name+":"),ak.verbose.apply(console,arguments)))},error:function(){ao.silent||(ak.error=Function.prototype.bind.call(console.error,console,ao.name+":"),ak.error.apply(console,arguments))},performance:{log:function(r){var q,s;ao.performance&&(s=(q=(new Date).getTime())-(o||q),o=q,f.push({Name:r[0],Arguments:[].slice.call(r,1)||"",Element:J,"Execution Time":s})),clearTimeout(ak.performance.timer),ak.performance.timer=setTimeout(ak.performance.display,500)},display:function(){var q=ao.name+":",r=0;o=!1,clearTimeout(ak.performance.timer),d.each(f,function(u,s){r+=s["Execution Time"]}),q+=" "+r+"ms",m&&(q+=" '"+m+"'"),(console.group!==a||console.table!==a)&&0<f.length&&(console.groupCollapsed(q),console.table?console.table(f):d.each(f,function(u,s){console.log(s.Name+": "+s["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(u,w,r){var q,x,y,v=P;return w=w||k,r=J||r,"string"==typeof u&&v!==a&&(u=u.split(/[\. ]/),q=u.length-1,d.each(u,function(A,s){var C=A!=q?s+u[A+1].charAt(0).toUpperCase()+u[A+1].slice(1):u;if(d.isPlainObject(v[C])&&A!=q){v=v[C]}else{if(v[C]!==a){return x=v[C],!1}if(!d.isPlainObject(v[s])||A==q){return v[s]!==a?x=v[s]:ak.error(ab.method,u),!1}v=v[s]}})),d.isFunction(x)?y=x.apply(r,w):x!==a&&(y=x),d.isArray(l)?l.push(y):l!==a?l=[l,y]:y!==a&&(l=y),x}},i?(P===a&&ak.initialize(),ak.invoke(e)):(P!==a&&P.invoke("destroy"),ak.initialize())}),l!==a?l:p},d.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,clearable:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:c,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,ignoreCase:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(g,f,h){},onAdd:function(g,f,h){},onRemove:function(g,f,h){},onLabelSelect:function(f){},onLabelCreate:function(g,f){return d(this)},onLabelRemove:function(f){return !0},onNoResults:function(f){return !0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",clear:"clear",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},d.fn.dropdown.settings.templates={dropdown:function(g){var f=g.placeholder||!1,h=(g.values,"");return h+='<i class="dropdown icon"></i>',g.placeholder?h+='<div class="default text">'+f+"</div>":h+='<div class="text"></div>',h+='<div class="menu">',d.each(g.values,function(j,i){h+=i.disabled?'<div class="disabled item" data-value="'+i.value+'">'+i.name+"</div>":'<div class="item" data-value="'+i.value+'">'+i.name+"</div>"}),h+="</div>"},menu:function(h,f){var g=h[f.values]||{},i="";return d.each(g,function(l,k){var m=k[f.text]?'data-text="'+k[f.text]+'"':"",j=k[f.disabled]?"disabled ":"";i+='<div class="'+j+'item" data-value="'+k[f.value]+'"'+m+">",i+=k[f.name],i+="</div>"}),i},label:function(g,f){return f+'<i class="delete icon"></i>'},message:function(f){return f},addition:function(f){return f}}}(jQuery,window,document);