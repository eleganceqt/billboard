/*!
 * # Semantic UI 2.4.1 - Visibility
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.visibility=function(a){var c=h(this),q=c.selector||"",s=new Date().getTime(),d=[],p=arguments[0],v=(typeof p=="string"),b=[].slice.call(arguments,1),r,t=c.length,u=0;c.each(function(){var n=(h.isPlainObject(a))?h.extend(true,{},h.fn.visibility.settings,a):h.extend({},h.fn.visibility.settings),P=n.className,k=n.namespace,N=n.error,m=n.metadata,O="."+k,i="module-"+k,T=h(e),J=h(this),Q=h(n.context),o,I=J.selector||"",l=J.data(i),M=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(w){setTimeout(w,0)},R=this,L=false,j,K,S;S={initialize:function(){S.debug("Initializing",n);S.setup.cache();if(S.should.trackChanges()){if(n.type=="image"){S.setup.image()}if(n.type=="fixed"){S.setup.fixed()}if(n.observeChanges){S.observeChanges()}S.bind.events()}S.save.position();if(!S.is.visible()){S.error(N.visible,J)}if(n.initialCheck){S.checkVisibility()}S.instantiate()},instantiate:function(){S.debug("Storing instance",S);J.data(i,S);l=S},destroy:function(){S.verbose("Destroying previous module");if(K){K.disconnect()}if(j){j.disconnect()}T.off("load"+O,S.event.load).off("resize"+O,S.event.resize);Q.off("scroll"+O,S.event.scroll).off("scrollchange"+O,S.event.scrollchange);if(n.type=="fixed"){S.resetFixed();S.remove.placeholder()}J.off(O).removeData(i)},observeChanges:function(){if("MutationObserver" in e){j=new MutationObserver(S.event.contextChanged);K=new MutationObserver(S.event.changed);j.observe(f,{childList:true,subtree:true});K.observe(R,{childList:true,subtree:true});S.debug("Setting up mutation observer",K)}},bind:{events:function(){S.verbose("Binding visibility events to scroll and resize");if(n.refreshOnLoad){T.on("load"+O,S.event.load)}T.on("resize"+O,S.event.resize);Q.off("scroll"+O).on("scroll"+O,S.event.scroll).on("scrollchange"+O,S.event.scrollchange)}},event:{changed:function(w){S.verbose("DOM tree modified, updating visibility calculations");S.timer=setTimeout(function(){S.verbose("DOM tree modified, updating sticky menu");S.refresh()},100)},contextChanged:function(w){[].forEach.call(w,function(x){if(x.removedNodes){[].forEach.call(x.removedNodes,function(y){if(y==R||h(y).find(R).length>0){S.debug("Element removed from DOM, tearing down events");S.destroy()}})}})},resize:function(){S.debug("Window resized");if(n.refreshOnResize){M(S.refresh)}},load:function(){S.debug("Page finished loading");M(S.refresh)},scroll:function(){if(n.throttle){clearTimeout(S.timer);S.timer=setTimeout(function(){Q.triggerHandler("scrollchange"+O,[Q.scrollTop()])},n.throttle)}else{M(function(){Q.triggerHandler("scrollchange"+O,[Q.scrollTop()])})}},scrollchange:function(w,x){S.checkVisibility(x)}},precache:function(y,A){if(!(y instanceof Array)){y=[y]}var B=y.length,C=0,x=[],z=f.createElement("img"),w=function(){C++;if(C>=y.length){if(h.isFunction(A)){A()}}};while(B--){z=f.createElement("img");z.onload=w;z.onerror=w;z.src=y[B];x.push(z)}},enableCallbacks:function(){S.debug("Allowing callbacks to occur");L=false},disableCallbacks:function(){S.debug("Disabling all callbacks temporarily");L=true},should:{trackChanges:function(){if(v){S.debug("One time query, no need to bind events");return false}S.debug("Callbacks being attached");return true}},setup:{cache:function(){S.cache={occurred:{},screen:{},element:{}}},image:function(){var w=J.data(m.src);if(w){S.verbose("Lazy loading image",w);n.once=true;n.observeChanges=false;n.onOnScreen=function(){S.debug("Image on screen",R);S.precache(w,function(){S.set.image(w,function(){u++;if(u==t){n.onAllLoaded.call(this)}n.onLoad.call(this)})})}}},fixed:function(){S.debug("Setting up fixed");n.once=false;n.observeChanges=false;n.initialCheck=true;n.refreshOnLoad=true;if(!a.transition){n.transition=false}S.create.placeholder();S.debug("Added placeholder",o);n.onTopPassed=function(){S.debug("Element passed, adding fixed position",J);S.show.placeholder();S.set.fixed();if(n.transition){if(h.fn.transition!==g){J.transition(n.transition,n.duration)}}};n.onTopPassedReverse=function(){S.debug("Element returned to position, removing fixed",J);S.hide.placeholder();S.remove.fixed()}}},create:{placeholder:function(){S.verbose("Creating fixed position placeholder");o=J.clone(false).css("display","none").addClass(P.placeholder).insertAfter(J)}},show:{placeholder:function(){S.verbose("Showing placeholder");o.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){S.verbose("Hiding placeholder");o.css("display","none").css("visibility","")}},set:{fixed:function(){S.verbose("Setting element to fixed position");J.addClass(P.fixed).css({position:"fixed",top:n.offset+"px",left:"auto",zIndex:n.zIndex});n.onFixed.call(R)},image:function(x,w){J.attr("src",x);if(n.transition){if(h.fn.transition!==g){if(J.hasClass(P.visible)){S.debug("Transition already occurred on this image, skipping animation");return}J.transition(n.transition,n.duration,w)}else{J.fadeIn(n.duration,w)}}else{J.show()}}},is:{onScreen:function(){var w=S.get.elementCalculations();return w.onScreen},offScreen:function(){var w=S.get.elementCalculations();return w.offScreen},visible:function(){if(S.cache&&S.cache.element){return !(S.cache.element.width===0&&S.cache.element.offset.top===0)}return false},verticallyScrollableContext:function(){var w=(Q.get(0)!==e)?Q.css("overflow-y"):false;return(w=="auto"||w=="scroll")},horizontallyScrollableContext:function(){var w=(Q.get(0)!==e)?Q.css("overflow-x"):false;return(w=="auto"||w=="scroll")}},refresh:function(){S.debug("Refreshing constants (width/height)");if(n.type=="fixed"){S.resetFixed()}S.reset();S.save.position();if(n.checkOnRefresh){S.checkVisibility()}n.onRefresh.call(R)},resetFixed:function(){S.remove.fixed();S.remove.occurred()},reset:function(){S.verbose("Resetting all cached values");if(h.isPlainObject(S.cache)){S.cache.screen={};S.cache.element={}}},checkVisibility:function(w){S.verbose("Checking visibility of element",S.cache.element);if(!L&&S.is.visible()){S.save.scroll(w);S.save.calculations();S.passed();S.passingReverse();S.topVisibleReverse();S.bottomVisibleReverse();S.topPassedReverse();S.bottomPassedReverse();S.onScreen();S.offScreen();S.passing();S.topVisible();S.bottomVisible();S.topPassed();S.bottomPassed();if(n.onUpdate){n.onUpdate.call(R,S.get.elementCalculations())}}},passed:function(x,w){var y=S.get.elementCalculations(),z;if(x&&w){n.onPassed[x]=w}else{if(x!==g){return(S.get.pixelsPassed(x)>y.pixelsPassed)}else{if(y.passing){h.each(n.onPassed,function(B,A){if(y.bottomVisible||y.pixelsPassed>S.get.pixelsPassed(B)){S.execute(A,B)}else{if(!n.once){S.remove.occurred(A)}}})}}}},onScreen:function(y){var z=S.get.elementCalculations(),w=y||n.onOnScreen,x="onScreen";if(y){S.debug("Adding callback for onScreen",y);n.onOnScreen=y}if(z.onScreen){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y!==g){return z.onOnScreen}},offScreen:function(y){var z=S.get.elementCalculations(),w=y||n.onOffScreen,x="offScreen";if(y){S.debug("Adding callback for offScreen",y);n.onOffScreen=y}if(z.offScreen){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y!==g){return z.onOffScreen}},passing:function(y){var z=S.get.elementCalculations(),w=y||n.onPassing,x="passing";if(y){S.debug("Adding callback for passing",y);n.onPassing=y}if(z.passing){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y!==g){return z.passing}},topVisible:function(y){var z=S.get.elementCalculations(),w=y||n.onTopVisible,x="topVisible";if(y){S.debug("Adding callback for top visible",y);n.onTopVisible=y}if(z.topVisible){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return z.topVisible}},bottomVisible:function(y){var z=S.get.elementCalculations(),w=y||n.onBottomVisible,x="bottomVisible";if(y){S.debug("Adding callback for bottom visible",y);n.onBottomVisible=y}if(z.bottomVisible){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return z.bottomVisible}},topPassed:function(y){var z=S.get.elementCalculations(),w=y||n.onTopPassed,x="topPassed";if(y){S.debug("Adding callback for top passed",y);n.onTopPassed=y}if(z.topPassed){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return z.topPassed}},bottomPassed:function(y){var z=S.get.elementCalculations(),w=y||n.onBottomPassed,x="bottomPassed";if(y){S.debug("Adding callback for bottom passed",y);n.onBottomPassed=y}if(z.bottomPassed){S.execute(w,x)}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return z.bottomPassed}},passingReverse:function(y){var z=S.get.elementCalculations(),w=y||n.onPassingReverse,x="passingReverse";if(y){S.debug("Adding callback for passing reverse",y);n.onPassingReverse=y}if(!z.passing){if(S.get.occurred("passing")){S.execute(w,x)}}else{if(!n.once){S.remove.occurred(x)}}if(y!==g){return !z.passing}},topVisibleReverse:function(y){var z=S.get.elementCalculations(),w=y||n.onTopVisibleReverse,x="topVisibleReverse";if(y){S.debug("Adding callback for top visible reverse",y);n.onTopVisibleReverse=y}if(!z.topVisible){if(S.get.occurred("topVisible")){S.execute(w,x)}}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return !z.topVisible}},bottomVisibleReverse:function(y){var z=S.get.elementCalculations(),w=y||n.onBottomVisibleReverse,x="bottomVisibleReverse";if(y){S.debug("Adding callback for bottom visible reverse",y);n.onBottomVisibleReverse=y}if(!z.bottomVisible){if(S.get.occurred("bottomVisible")){S.execute(w,x)}}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return !z.bottomVisible}},topPassedReverse:function(y){var z=S.get.elementCalculations(),w=y||n.onTopPassedReverse,x="topPassedReverse";if(y){S.debug("Adding callback for top passed reverse",y);n.onTopPassedReverse=y}if(!z.topPassed){if(S.get.occurred("topPassed")){S.execute(w,x)}}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return !z.onTopPassed}},bottomPassedReverse:function(y){var z=S.get.elementCalculations(),w=y||n.onBottomPassedReverse,x="bottomPassedReverse";if(y){S.debug("Adding callback for bottom passed reverse",y);n.onBottomPassedReverse=y}if(!z.bottomPassed){if(S.get.occurred("bottomPassed")){S.execute(w,x)}}else{if(!n.once){S.remove.occurred(x)}}if(y===g){return !z.bottomPassed}},execute:function(w,x){var z=S.get.elementCalculations(),y=S.get.screenCalculations();w=w||false;if(w){if(n.continuous){S.debug("Callback being called continuously",x,z);w.call(R,z,y)}else{if(!S.get.occurred(x)){S.debug("Conditions met",x,z);w.call(R,z,y)}}}S.save.occurred(x)},remove:{fixed:function(){S.debug("Removing fixed position");J.removeClass(P.fixed).css({position:"",top:"",left:"",zIndex:""});n.onUnfixed.call(R)},placeholder:function(){S.debug("Removing placeholder content");if(o){o.remove()}},occurred:function(w){if(w){var x=S.cache.occurred;if(x[w]!==g&&x[w]===true){S.debug("Callback can now be called again",w);S.cache.occurred[w]=false}}else{S.cache.occurred={}}}},save:{calculations:function(){S.verbose("Saving all calculations necessary to determine positioning");S.save.direction();S.save.screenCalculations();S.save.elementCalculations()},occurred:function(w){if(w){if(S.cache.occurred[w]===g||(S.cache.occurred[w]!==true)){S.verbose("Saving callback occurred",w);S.cache.occurred[w]=true}}},scroll:function(w){w=w+n.offset||Q.scrollTop()+n.offset;S.cache.scroll=w},direction:function(){var y=S.get.scroll(),x=S.get.lastScroll(),w;if(y>x&&x){w="down"}else{if(y<x&&x){w="up"}else{w="static"}}S.cache.direction=w;return S.cache.direction},elementPosition:function(){var w=S.cache.element,x=S.get.screenSize();S.verbose("Saving element position");w.fits=(w.height<x.height);w.offset=J.offset();w.width=J.outerWidth();w.height=J.outerHeight();if(S.is.verticallyScrollableContext()){w.offset.top+=Q.scrollTop()-Q.offset().top}if(S.is.horizontallyScrollableContext()){w.offset.left+=Q.scrollLeft-Q.offset().left}S.cache.element=w;return w},elementCalculations:function(){var x=S.get.screenCalculations(),w=S.get.elementPosition();if(n.includeMargin){w.margin={};w.margin.top=parseInt(J.css("margin-top"),10);w.margin.bottom=parseInt(J.css("margin-bottom"),10);w.top=w.offset.top-w.margin.top;w.bottom=w.offset.top+w.height+w.margin.bottom}else{w.top=w.offset.top;w.bottom=w.offset.top+w.height}w.topPassed=(x.top>=w.top);w.bottomPassed=(x.top>=w.bottom);w.topVisible=(x.bottom>=w.top)&&!w.topPassed;w.bottomVisible=(x.bottom>=w.bottom)&&!w.bottomPassed;w.pixelsPassed=0;w.percentagePassed=0;w.onScreen=((w.topVisible||w.passing)&&!w.bottomPassed);w.passing=(w.topPassed&&!w.bottomPassed);w.offScreen=(!w.onScreen);if(w.passing){w.pixelsPassed=(x.top-w.top);w.percentagePassed=(x.top-w.top)/w.height}S.cache.element=w;S.verbose("Updated element calculations",w);return w},screenCalculations:function(){var w=S.get.scroll();S.save.direction();S.cache.screen.top=w;S.cache.screen.bottom=w+S.cache.screen.height;return S.cache.screen},screenSize:function(){S.verbose("Saving window position");S.cache.screen={height:Q.height()}},position:function(){S.save.screenSize();S.save.elementPosition()}},get:{pixelsPassed:function(w){var x=S.get.elementCalculations();if(w.search("%")>-1){return(x.height*(parseInt(w,10)/100))}return parseInt(w,10)},occurred:function(w){return(S.cache.occurred!==g)?S.cache.occurred[w]||false:false},direction:function(){if(S.cache.direction===g){S.save.direction()}return S.cache.direction},elementPosition:function(){if(S.cache.element===g){S.save.elementPosition()}return S.cache.element},elementCalculations:function(){if(S.cache.element===g){S.save.elementCalculations()}return S.cache.element},screenCalculations:function(){if(S.cache.screen===g){S.save.screenCalculations()}return S.cache.screen},screenSize:function(){if(S.cache.screen===g){S.save.screenSize()}return S.cache.screen},scroll:function(){if(S.cache.scroll===g){S.save.scroll()}return S.cache.scroll},lastScroll:function(){if(S.cache.screen===g){S.debug("First scroll event, no last scroll could be found");return false}return S.cache.screen.top}},setting:function(x,w){if(h.isPlainObject(x)){h.extend(true,n,x)}else{if(w!==g){n[x]=w}else{return n[x]}}},internal:function(x,w){if(h.isPlainObject(x)){h.extend(true,S,x)}else{if(w!==g){S[x]=w}else{return S[x]}}},debug:function(){if(!n.silent&&n.debug){if(n.performance){S.performance.log(arguments)}else{S.debug=Function.prototype.bind.call(console.info,console,n.name+":");S.debug.apply(console,arguments)}}},verbose:function(){if(!n.silent&&n.verbose&&n.debug){if(n.performance){S.performance.log(arguments)}else{S.verbose=Function.prototype.bind.call(console.info,console,n.name+":");S.verbose.apply(console,arguments)}}},error:function(){if(!n.silent){S.error=Function.prototype.bind.call(console.error,console,n.name+":");S.error.apply(console,arguments)}},performance:{log:function(x){var y,w,z;if(n.performance){y=new Date().getTime();z=s||y;w=y-z;s=y;d.push({Name:x[0],Arguments:[].slice.call(x,1)||"",Element:R,"Execution Time":w})}clearTimeout(S.performance.timer);S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var w=n.name+":",x=0;s=false;clearTimeout(S.performance.timer);h.each(d,function(z,y){x+=y["Execution Time"]});w+=" "+x+"ms";if(q){w+=" '"+q+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(w);if(console.table){console.table(d)}else{h.each(d,function(z,y){console.log(y.Name+": "+y["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(B,y,w){var x=l,A,C,z;y=y||b;w=R||w;if(typeof B=="string"&&x!==g){B=B.split(/[\. ]/);A=B.length-1;h.each(B,function(D,E){var F=(D!=A)?E+B[D+1].charAt(0).toUpperCase()+B[D+1].slice(1):B;if(h.isPlainObject(x[F])&&(D!=A)){x=x[F]}else{if(x[F]!==g){C=x[F];return false}else{if(h.isPlainObject(x[E])&&(D!=A)){x=x[E]}else{if(x[E]!==g){C=x[E];return false}else{S.error(N.method,B);return false}}}}})}if(h.isFunction(C)){z=C.apply(w,y)}else{if(C!==g){z=C}}if(h.isArray(r)){r.push(z)}else{if(r!==g){r=[r,z]}else{if(z!==g){r=z}}}return C}};if(v){if(l===g){S.initialize()}l.save.scroll();l.save.calculations();S.invoke(p)}else{if(l!==g){l.invoke("destroy")}S.initialize()}});return(r!==g)?r:this};h.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:false,verbose:false,performance:true,observeChanges:true,initialCheck:true,refreshOnLoad:true,refreshOnResize:true,checkOnRefresh:true,once:true,continuous:false,offset:0,includeMargin:false,context:e,throttle:false,type:false,zIndex:"10",transition:"fade in",duration:1000,onPassed:{},onOnScreen:false,onOffScreen:false,onPassing:false,onTopVisible:false,onBottomVisible:false,onTopPassed:false,onBottomPassed:false,onPassingReverse:false,onTopVisibleReverse:false,onBottomVisibleReverse:false,onTopPassedReverse:false,onBottomPassedReverse:false,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:false,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder",visible:"visible"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}})(jQuery,window,document);