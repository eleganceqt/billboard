/*!
 * # Semantic UI 2.4.1 - Sticky
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.sticky=function(a){var c=h(this),o=c.selector||"",q=new Date().getTime(),d=[],n=arguments[0],r=(typeof n=="string"),b=[].slice.call(arguments,1),p;c.each(function(){var J=(h.isPlainObject(a))?h.extend(true,{},h.fn.sticky.settings,a):h.extend({},h.fn.sticky.settings),P=J.className,H=J.namespace,i=J.error,k="."+H,F="module-"+H,I=h(this),m=h(e),L=h(J.scrollContext),j,l,K=I.selector||"",G=I.data(F),N=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(s){setTimeout(s,0)},Q=this,O,M,R;R={initialize:function(){R.determineContainer();R.determineContext();R.verbose("Initializing sticky",J,j);R.save.positions();R.checkErrors();R.bind.events();if(J.observeChanges){R.observeChanges()}R.instantiate()},instantiate:function(){R.verbose("Storing instance of module",R);G=R;I.data(F,R)},destroy:function(){R.verbose("Destroying previous instance");R.reset();if(O){O.disconnect()}if(M){M.disconnect()}m.off("load"+k,R.event.load).off("resize"+k,R.event.resize);L.off("scrollchange"+k,R.event.scrollchange);I.removeData(F)},observeChanges:function(){if("MutationObserver" in e){O=new MutationObserver(R.event.documentChanged);M=new MutationObserver(R.event.changed);O.observe(f,{childList:true,subtree:true});M.observe(Q,{childList:true,subtree:true});M.observe(l[0],{childList:true,subtree:true});R.debug("Setting up mutation observer",M)}},determineContainer:function(){if(J.container){j=h(J.container)}else{j=I.offsetParent()}},determineContext:function(){if(J.context){l=h(J.context)}else{l=j}if(l.length===0){R.error(i.invalidContext,J.context,I);return}},checkErrors:function(){if(R.is.hidden()){R.error(i.visible,I)}if(R.cache.element.height>R.cache.context.height){R.reset();R.error(i.elementSize,I);return}},bind:{events:function(){m.on("load"+k,R.event.load).on("resize"+k,R.event.resize);L.off("scroll"+k).on("scroll"+k,R.event.scroll).on("scrollchange"+k,R.event.scrollchange)}},event:{changed:function(s){clearTimeout(R.timer);R.timer=setTimeout(function(){R.verbose("DOM tree modified, updating sticky menu",s);R.refresh()},100)},documentChanged:function(s){[].forEach.call(s,function(t){if(t.removedNodes){[].forEach.call(t.removedNodes,function(u){if(u==Q||h(u).find(Q).length>0){R.debug("Element removed from DOM, tearing down events");R.destroy()}})}})},load:function(){R.verbose("Page contents finished loading");N(R.refresh)},resize:function(){R.verbose("Window resized");N(R.refresh)},scroll:function(){N(function(){L.triggerHandler("scrollchange"+k,L.scrollTop())})},scrollchange:function(s,t){R.stick(t);J.onScroll.call(Q)}},refresh:function(s){R.reset();if(!J.context){R.determineContext()}if(s){R.determineContainer()}R.save.positions();R.stick();J.onReposition.call(Q)},supports:{sticky:function(){var t=h("<div/>"),s=t[0];t.addClass(P.supported);return(t.css("position").match("sticky"))}},save:{lastScroll:function(s){R.lastScroll=s},elementScroll:function(s){R.elementScroll=s},positions:function(){var s={height:L.height()},t={margin:{top:parseInt(I.css("margin-top"),10),bottom:parseInt(I.css("margin-bottom"),10)},offset:I.offset(),width:I.outerWidth(),height:I.outerHeight()},u={offset:l.offset(),height:l.outerHeight()},v={height:j.outerHeight()};if(!R.is.standardScroll()){R.debug("Non-standard scroll. Removing scroll offset from element offset");s.top=L.scrollTop();s.left=L.scrollLeft();t.offset.top+=s.top;u.offset.top+=s.top;t.offset.left+=s.left;u.offset.left+=s.left}R.cache={fits:((t.height+J.offset)<=s.height),sameHeight:(t.height==u.height),scrollContext:{height:s.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:u.offset.top,height:u.height,bottom:u.offset.top+u.height}};R.set.containerSize();R.stick();R.debug("Caching element positions",R.cache)}},get:{direction:function(t){var s="down";t=t||L.scrollTop();if(R.lastScroll!==g){if(R.lastScroll<t){s="down"}else{if(R.lastScroll>t){s="up"}}}return s},scrollChange:function(s){s=s||L.scrollTop();return(R.lastScroll)?(s-R.lastScroll):0},currentElementScroll:function(){if(R.elementScroll){return R.elementScroll}return(R.is.top())?Math.abs(parseInt(I.css("top"),10))||0:Math.abs(parseInt(I.css("bottom"),10))||0},elementScroll:function(y){y=y||L.scrollTop();var x=R.cache.element,t=R.cache.scrollContext,s=R.get.scrollChange(y),v=(x.height-t.height+J.offset),w=R.get.currentElementScroll(),u=(w+s);if(R.cache.fits||u<0){w=0}else{if(u>v){w=v}else{w=u}}return w}},remove:{lastScroll:function(){delete R.lastScroll},elementScroll:function(s){delete R.elementScroll},minimumSize:function(){j.css("min-height","")},offset:function(){I.css("margin-top","")}},set:{offset:function(){R.verbose("Setting offset on element",J.offset);I.css("margin-top",J.offset)},containerSize:function(){var s=j.get(0).tagName;if(s==="HTML"||s=="body"){R.determineContainer()}else{if(Math.abs(j.outerHeight()-R.cache.context.height)>J.jitter){R.debug("Context has padding, specifying exact height for container",R.cache.context.height);j.css({height:R.cache.context.height})}}},minimumSize:function(){var s=R.cache.element;j.css("min-height",s.height)},scroll:function(s){R.debug("Setting scroll on element",s);if(R.elementScroll==s){return}if(R.is.top()){I.css("bottom","").css("top",-s)}if(R.is.bottom()){I.css("top","").css("bottom",s)}},size:function(){if(R.cache.element.height!==0&&R.cache.element.width!==0){Q.style.setProperty("width",R.cache.element.width+"px","important");Q.style.setProperty("height",R.cache.element.height+"px","important")}}},is:{standardScroll:function(){return(L[0]==e)},top:function(){return I.hasClass(P.top)},bottom:function(){return I.hasClass(P.bottom)},initialPosition:function(){return(!R.is.fixed()&&!R.is.bound())},hidden:function(){return(!I.is(":visible"))},bound:function(){return I.hasClass(P.bound)},fixed:function(){return I.hasClass(P.fixed)}},stick:function(t){var v=t||L.scrollTop(),E=R.cache,s=E.fits,w=E.sameHeight,z=E.element,B=E.scrollContext,D=E.context,A=(R.is.bottom()&&J.pushing)?J.bottomOffset:J.offset,t={top:v+A,bottom:v+A+B.height},u=R.get.direction(t.top),y=(s)?0:R.get.elementScroll(t.top),C=!s,x=(z.height!==0);if(x&&!w){if(R.is.initialPosition()){if(t.top>=D.bottom){R.debug("Initial element position is bottom of container");R.bindBottom()}else{if(t.top>z.top){if((z.height+t.top-y)>=D.bottom){R.debug("Initial element position is bottom of container");R.bindBottom()}else{R.debug("Initial element position is fixed");R.fixTop()}}}}else{if(R.is.fixed()){if(R.is.top()){if(t.top<=z.top){R.debug("Fixed element reached top of container");R.setInitialPosition()}else{if((z.height+t.top-y)>=D.bottom){R.debug("Fixed element reached bottom of container");R.bindBottom()}else{if(C){R.set.scroll(y);R.save.lastScroll(t.top);R.save.elementScroll(y)}}}}else{if(R.is.bottom()){if((t.bottom-z.height)<=z.top){R.debug("Bottom fixed rail has reached top of container");R.setInitialPosition()}else{if(t.bottom>=D.bottom){R.debug("Bottom fixed rail has reached bottom of container");R.bindBottom()}else{if(C){R.set.scroll(y);R.save.lastScroll(t.top);R.save.elementScroll(y)}}}}}}else{if(R.is.bottom()){if(t.top<=z.top){R.debug("Jumped from bottom fixed to top fixed, most likely used home/end button");R.setInitialPosition()}else{if(J.pushing){if(R.is.bound()&&t.bottom<=D.bottom){R.debug("Fixing bottom attached element to bottom of browser.");R.fixBottom()}}else{if(R.is.bound()&&(t.top<=D.bottom-z.height)){R.debug("Fixing bottom attached element to top of browser.");R.fixTop()}}}}}}}},bindTop:function(){R.debug("Binding element to top of parent container");R.remove.offset();I.css({left:"",top:"",marginBottom:""}).removeClass(P.fixed).removeClass(P.bottom).addClass(P.bound).addClass(P.top);J.onTop.call(Q);J.onUnstick.call(Q)},bindBottom:function(){R.debug("Binding element to bottom of parent container");R.remove.offset();I.css({left:"",top:""}).removeClass(P.fixed).removeClass(P.top).addClass(P.bound).addClass(P.bottom);J.onBottom.call(Q);J.onUnstick.call(Q)},setInitialPosition:function(){R.debug("Returning to initial position");R.unfix();R.unbind()},fixTop:function(){R.debug("Fixing element to top of page");if(J.setSize){R.set.size()}R.set.minimumSize();R.set.offset();I.css({left:R.cache.element.left,bottom:"",marginBottom:""}).removeClass(P.bound).removeClass(P.bottom).addClass(P.fixed).addClass(P.top);J.onStick.call(Q)},fixBottom:function(){R.debug("Sticking element to bottom of page");if(J.setSize){R.set.size()}R.set.minimumSize();R.set.offset();I.css({left:R.cache.element.left,bottom:"",marginBottom:""}).removeClass(P.bound).removeClass(P.top).addClass(P.fixed).addClass(P.bottom);J.onStick.call(Q)},unbind:function(){if(R.is.bound()){R.debug("Removing container bound position on element");R.remove.offset();I.removeClass(P.bound).removeClass(P.top).removeClass(P.bottom)}},unfix:function(){if(R.is.fixed()){R.debug("Removing fixed position on element");R.remove.minimumSize();R.remove.offset();I.removeClass(P.fixed).removeClass(P.top).removeClass(P.bottom);J.onUnstick.call(Q)}},reset:function(){R.debug("Resetting elements position");R.unbind();R.unfix();R.resetCSS();R.remove.offset();R.remove.lastScroll()},resetCSS:function(){I.css({width:"",height:""});j.css({height:""})},setting:function(t,s){if(h.isPlainObject(t)){h.extend(true,J,t)}else{if(s!==g){J[t]=s}else{return J[t]}}},internal:function(t,s){if(h.isPlainObject(t)){h.extend(true,R,t)}else{if(s!==g){R[t]=s}else{return R[t]}}},debug:function(){if(!J.silent&&J.debug){if(J.performance){R.performance.log(arguments)}else{R.debug=Function.prototype.bind.call(console.info,console,J.name+":");R.debug.apply(console,arguments)}}},verbose:function(){if(!J.silent&&J.verbose&&J.debug){if(J.performance){R.performance.log(arguments)}else{R.verbose=Function.prototype.bind.call(console.info,console,J.name+":");R.verbose.apply(console,arguments)}}},error:function(){if(!J.silent){R.error=Function.prototype.bind.call(console.error,console,J.name+":");R.error.apply(console,arguments)}},performance:{log:function(t){var u,s,v;if(J.performance){u=new Date().getTime();v=q||u;s=u-v;q=u;d.push({Name:t[0],Arguments:[].slice.call(t,1)||"",Element:Q,"Execution Time":s})}clearTimeout(R.performance.timer);R.performance.timer=setTimeout(R.performance.display,0)},display:function(){var s=J.name+":",t=0;q=false;clearTimeout(R.performance.timer);h.each(d,function(v,u){t+=u["Execution Time"]});s+=" "+t+"ms";if(o){s+=" '"+o+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(s);if(console.table){console.table(d)}else{h.each(d,function(v,u){console.log(u.Name+": "+u["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(t,x,v){var w=G,s,u,y;x=x||b;v=Q||v;if(typeof t=="string"&&w!==g){t=t.split(/[\. ]/);s=t.length-1;h.each(t,function(z,A){var B=(z!=s)?A+t[z+1].charAt(0).toUpperCase()+t[z+1].slice(1):t;if(h.isPlainObject(w[B])&&(z!=s)){w=w[B]}else{if(w[B]!==g){u=w[B];return false}else{if(h.isPlainObject(w[A])&&(z!=s)){w=w[A]}else{if(w[A]!==g){u=w[A];return false}else{return false}}}}})}if(h.isFunction(u)){y=u.apply(v,x)}else{if(u!==g){y=u}}if(h.isArray(p)){p.push(y)}else{if(p!==g){p=[p,y]}else{if(y!==g){p=y}}}return u}};if(r){if(G===g){R.initialize()}R.invoke(n)}else{if(G!==g){G.invoke("destroy")}R.initialize()}});return(p!==g)?p:this};h.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:false,debug:false,verbose:true,performance:true,pushing:false,context:false,container:false,scrollContext:e,offset:0,bottomOffset:0,jitter:5,setSize:true,observeChanges:false,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}})(jQuery,window,document);