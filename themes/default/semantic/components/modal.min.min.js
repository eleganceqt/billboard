/*!
 * # Semantic UI 2.4.1 - Modal
 * http://github.com/semantic-org/semantic-ui/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.modal=function(a){var c=h(this),y=h(e),v=h(f),u=h("body"),s=c.selector||"",x=new Date().getTime(),d=[],r=arguments[0],z=(typeof r=="string"),b=[].slice.call(arguments,1),t=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.msRequestAnimationFrame||function(i){setTimeout(i,0)},w;c.each(function(){var m=(h.isPlainObject(a))?h.extend(true,{},h.fn.modal.settings,a):h.extend({},h.fn.modal.settings),o=m.selector,R=m.className,l=m.namespace,O=m.error,V="."+l,Z="module-"+l,N=h(this),X=h(m.context),P=N.find(o.close),i,n,Q,p,S,T=this,k=N.data(Z),W=false,j,Y,q,U;U={initialize:function(){U.verbose("Initializing dimmer",X);U.create.id();U.create.dimmer();U.refreshModals();U.bind.events();if(m.observeChanges){U.observeChanges()}U.instantiate()},instantiate:function(){U.verbose("Storing instance of modal");k=U;N.data(Z,k)},create:{dimmer:function(){var B={debug:m.debug,variation:m.centered?false:"top aligned",dimmerName:"modals"},A=h.extend(true,B,m.dimmerSettings);if(h.fn.dimmer===g){U.error(O.dimmer);return}U.debug("Creating dimmer");p=X.dimmer(A);if(m.detachable){U.verbose("Modal is detachable, moving content into dimmer");p.dimmer("add content",N)}else{U.set.undetached()}S=p.dimmer("get dimmer")},id:function(){Y=(Math.random().toString(16)+"000000000").substr(2,8);j="."+Y;U.verbose("Creating unique id for element",Y)}},destroy:function(){U.verbose("Destroying previous modal");N.removeData(Z).off(V);y.off(j);S.off(j);P.off(V);X.dimmer("destroy")},observeChanges:function(){if("MutationObserver" in e){q=new MutationObserver(function(A){U.debug("DOM tree modified, refreshing");U.refresh()});q.observe(T,{childList:true,subtree:true});U.debug("Setting up mutation observer",q)}},refresh:function(){U.remove.scrolling();U.cacheSizes();if(!U.can.useFlex()){U.set.modalOffset()}U.set.screenHeight();U.set.type()},refreshModals:function(){n=N.siblings(o.modal);i=n.add(N)},attachEvents:function(C,A){var B=h(C);A=h.isFunction(U[A])?U[A]:U.toggle;if(B.length>0){U.debug("Attaching modal events to element",C,A);B.off(V).on("click"+V,A)}else{U.error(O.notFound,C)}},bind:{events:function(){U.verbose("Attaching events");N.on("click"+V,o.close,U.event.close).on("click"+V,o.approve,U.event.approve).on("click"+V,o.deny,U.event.deny);y.on("resize"+j,U.event.resize)},scrollLock:function(){p.get(0).addEventListener("touchmove",U.event.preventScroll,{passive:false})}},unbind:{scrollLock:function(){p.get(0).removeEventListener("touchmove",U.event.preventScroll,{passive:false})}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){if(W||m.onApprove.call(T,h(this))===false){U.verbose("Approve callback returned false cancelling hide");return}W=true;U.hide(function(){W=false})},preventScroll:function(A){A.preventDefault()},deny:function(){if(W||m.onDeny.call(T,h(this))===false){U.verbose("Deny callback returned false cancelling hide");return}W=true;U.hide(function(){W=false})},close:function(){U.hide()},click:function(A){if(!m.closable){U.verbose("Dimmer clicked but closable setting is disabled");return}var C=h(A.target),B=(C.closest(o.modal).length>0),D=h.contains(f.documentElement,A.target);if(!B&&D&&U.is.active()){U.debug("Dimmer clicked, hiding all modals");U.remove.clickaway();if(m.allowMultiple){U.hide()}else{U.hideAll()}}},debounce:function(A,B){clearTimeout(U.timer);U.timer=setTimeout(A,B)},keyboard:function(B){var A=B.which,C=27;if(A==C){if(m.closable){U.debug("Escape key pressed hiding modal");U.hide()}else{U.debug("Escape key pressed, but closable is set to false")}B.preventDefault()}},resize:function(){if(p.dimmer("is active")&&(U.is.animating()||U.is.active())){t(U.refresh)}}},toggle:function(){if(U.is.active()||U.is.animating()){U.hide()}else{U.show()}},show:function(A){A=h.isFunction(A)?A:function(){};U.refreshModals();U.set.dimmerSettings();U.set.dimmerStyles();U.showModal(A)},hide:function(A){A=h.isFunction(A)?A:function(){};U.refreshModals();U.hideModal(A)},showModal:function(A){A=h.isFunction(A)?A:function(){};if(U.is.animating()||!U.is.active()){U.showDimmer();U.cacheSizes();if(U.can.useFlex()){U.remove.legacy()}else{U.set.legacy();U.set.modalOffset();U.debug("Using non-flex legacy modal positioning.")}U.set.screenHeight();U.set.type();U.set.clickaway();if(!m.allowMultiple&&U.others.active()){U.hideOthers(U.showModal)}else{if(m.allowMultiple&&m.detachable){N.detach().appendTo(S)}m.onShow.call(T);if(m.transition&&h.fn.transition!==g&&N.transition("is supported")){U.debug("Showing modal with css animations");N.transition({debug:m.debug,animation:m.transition+" in",queue:m.queue,duration:m.duration,useFailSafe:true,onComplete:function(){m.onVisible.apply(T);if(m.keyboardShortcuts){U.add.keyboardShortcuts()}U.save.focus();U.set.active();if(m.autofocus){U.set.autofocus()}A()}})}else{U.error(O.noTransition)}}}else{U.debug("Modal is already visible")}},hideModal:function(A,B){A=h.isFunction(A)?A:function(){};U.debug("Hiding modal");if(m.onHide.call(T,h(this))===false){U.verbose("Hide callback returned false cancelling hide");return}if(U.is.animating()||U.is.active()){if(m.transition&&h.fn.transition!==g&&N.transition("is supported")){U.remove.active();N.transition({debug:m.debug,animation:m.transition+" out",queue:m.queue,duration:m.duration,useFailSafe:true,onStart:function(){if(!U.others.active()&&!B){U.hideDimmer()}if(m.keyboardShortcuts){U.remove.keyboardShortcuts()}},onComplete:function(){m.onHidden.call(T);U.remove.dimmerStyles();U.restore.focus();A()}})}else{U.error(O.noTransition)}}},showDimmer:function(){if(p.dimmer("is animating")||!p.dimmer("is active")){U.debug("Showing dimmer");p.dimmer("show")}else{U.debug("Dimmer already visible")}},hideDimmer:function(){if(p.dimmer("is animating")||(p.dimmer("is active"))){U.unbind.scrollLock();p.dimmer("hide",function(){U.remove.clickaway();U.remove.screenHeight()})}else{U.debug("Dimmer is not visible cannot hide");return}},hideAll:function(A){var B=i.filter("."+R.active+", ."+R.animating);A=h.isFunction(A)?A:function(){};if(B.length>0){U.debug("Hiding all visible modals");U.hideDimmer();B.modal("hide modal",A)}},hideOthers:function(A){var B=n.filter("."+R.active+", ."+R.animating);A=h.isFunction(A)?A:function(){};if(B.length>0){U.debug("Hiding other modals",n);B.modal("hide modal",A,true)}},others:{active:function(){return(n.filter("."+R.active).length>0)},animating:function(){return(n.filter("."+R.animating).length>0)}},add:{keyboardShortcuts:function(){U.verbose("Adding keyboard shortcuts");v.on("keyup"+V,U.event.keyboard)}},save:{focus:function(){var B=h(f.activeElement),A=B.closest(N).length>0;if(!A){Q=h(f.activeElement).blur()}}},restore:{focus:function(){if(Q&&Q.length>0){Q.focus()}}},remove:{active:function(){N.removeClass(R.active)},legacy:function(){N.removeClass(R.legacy)},clickaway:function(){S.off("click"+j)},dimmerStyles:function(){S.removeClass(R.inverted);p.removeClass(R.blurring)},bodyStyle:function(){if(u.attr("style")===""){U.verbose("Removing style attribute");u.removeAttr("style")}},screenHeight:function(){U.debug("Removing page height");u.css("height","")},keyboardShortcuts:function(){U.verbose("Removing keyboard shortcuts");v.off("keyup"+V)},scrolling:function(){p.removeClass(R.scrolling);N.removeClass(R.scrolling)}},cacheSizes:function(){N.addClass(R.loading);var A=N.prop("scrollHeight"),C=N.outerWidth(),B=N.outerHeight();if(U.cache===g||B!==0){U.cache={pageHeight:h(f).outerHeight(),width:C,height:B+m.offset,scrollHeight:A+m.offset,contextHeight:(m.context=="body")?h(e).height():p.height()};U.cache.topOffset=-(U.cache.height/2)}N.removeClass(R.loading);U.debug("Caching modal and container sizes",U.cache)},can:{useFlex:function(){return(m.useFlex=="auto")?m.detachable&&!U.is.ie():m.useFlex},fit:function(){var F=U.cache.contextHeight,D=U.cache.contextHeight/2,E=U.cache.topOffset,B=U.cache.scrollHeight,G=U.cache.height,A=m.padding,C=(D+E);return(B>G)?(C+B+A<F):(G+(A*2)<F)}},is:{active:function(){return N.hasClass(R.active)},ie:function(){var A=(!(e.ActiveXObject)&&"ActiveXObject" in e),B=("ActiveXObject" in e);return(A||B)},animating:function(){return N.transition("is supported")?N.transition("is animating"):N.is(":visible")},scrolling:function(){return p.hasClass(R.scrolling)},modernBrowser:function(){return !(e.ActiveXObject||"ActiveXObject" in e)}},set:{autofocus:function(){var C=N.find("[tabindex], :input").filter(":visible"),B=C.filter("[autofocus]"),A=(B.length>0)?B.first():C.first();if(A.length>0){A.focus()}},clickaway:function(){S.on("click"+j,U.event.click)},dimmerSettings:function(){if(h.fn.dimmer===g){U.error(O.dimmer);return}var B={debug:m.debug,dimmerName:"modals",closable:"auto",useFlex:U.can.useFlex(),variation:m.centered?false:"top aligned",duration:{show:m.duration,hide:m.duration}},A=h.extend(true,B,m.dimmerSettings);if(m.inverted){A.variation=(A.variation!==g)?A.variation+" inverted":"inverted"}X.dimmer("setting",A)},dimmerStyles:function(){if(m.inverted){S.addClass(R.inverted)}else{S.removeClass(R.inverted)}if(m.blurring){p.addClass(R.blurring)}else{p.removeClass(R.blurring)}},modalOffset:function(){var A=U.cache.width,B=U.cache.height;N.css({marginTop:(m.centered&&U.can.fit())?-(B/2):0,marginLeft:-(A/2)});U.verbose("Setting modal offset for legacy mode")},screenHeight:function(){if(U.can.fit()){u.css("height","")}else{U.debug("Modal is taller than page content, resizing page height");u.css("height",U.cache.height+(m.padding*2))}},active:function(){N.addClass(R.active)},scrolling:function(){p.addClass(R.scrolling);N.addClass(R.scrolling);U.unbind.scrollLock()},legacy:function(){N.addClass(R.legacy)},type:function(){if(U.can.fit()){U.verbose("Modal fits on screen");if(!U.others.active()&&!U.others.animating()){U.remove.scrolling();U.bind.scrollLock()}}else{U.verbose("Modal cannot fit on screen setting to scrolling");U.set.scrolling()}},undetached:function(){p.addClass(R.undetached)}},setting:function(B,A){U.debug("Changing setting",B,A);if(h.isPlainObject(B)){h.extend(true,m,B)}else{if(A!==g){if(h.isPlainObject(m[B])){h.extend(true,m[B],A)}else{m[B]=A}}else{return m[B]}}},internal:function(B,A){if(h.isPlainObject(B)){h.extend(true,U,B)}else{if(A!==g){U[B]=A}else{return U[B]}}},debug:function(){if(!m.silent&&m.debug){if(m.performance){U.performance.log(arguments)}else{U.debug=Function.prototype.bind.call(console.info,console,m.name+":");U.debug.apply(console,arguments)}}},verbose:function(){if(!m.silent&&m.verbose&&m.debug){if(m.performance){U.performance.log(arguments)}else{U.verbose=Function.prototype.bind.call(console.info,console,m.name+":");U.verbose.apply(console,arguments)}}},error:function(){if(!m.silent){U.error=Function.prototype.bind.call(console.error,console,m.name+":");U.error.apply(console,arguments)}},performance:{log:function(B){var C,A,D;if(m.performance){C=new Date().getTime();D=x||C;A=C-D;x=C;d.push({Name:B[0],Arguments:[].slice.call(B,1)||"",Element:T,"Execution Time":A})}clearTimeout(U.performance.timer);U.performance.timer=setTimeout(U.performance.display,500)},display:function(){var A=m.name+":",B=0;x=false;clearTimeout(U.performance.timer);h.each(d,function(D,C){B+=C["Execution Time"]});A+=" "+B+"ms";if(s){A+=" '"+s+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(A);if(console.table){console.table(d)}else{h.each(d,function(D,C){console.log(C.Name+": "+C["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(B,F,D){var E=k,A,C,G;F=F||b;D=T||D;if(typeof B=="string"&&E!==g){B=B.split(/[\. ]/);A=B.length-1;h.each(B,function(H,I){var J=(H!=A)?I+B[H+1].charAt(0).toUpperCase()+B[H+1].slice(1):B;if(h.isPlainObject(E[J])&&(H!=A)){E=E[J]}else{if(E[J]!==g){C=E[J];return false}else{if(h.isPlainObject(E[I])&&(H!=A)){E=E[I]}else{if(E[I]!==g){C=E[I];return false}else{return false}}}}})}if(h.isFunction(C)){G=C.apply(D,F)}else{if(C!==g){G=C}}if(h.isArray(w)){w.push(G)}else{if(w!==g){w=[w,G]}else{if(G!==g){w=G}}}return C}};if(z){if(k===g){U.initialize()}U.invoke(r)}else{if(k!==g){k.invoke("destroy")}U.initialize()}});return(w!==g)?w:this};h.fn.modal.settings={name:"Modal",namespace:"modal",useFlex:"auto",offset:0,silent:false,debug:false,verbose:false,performance:true,observeChanges:false,allowMultiple:false,detachable:true,closable:true,autofocus:true,inverted:false,blurring:false,centered:true,dimmerSettings:{closable:false,useCSS:true},keyboardShortcuts:true,context:"body",queue:false,duration:500,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return true},onHidden:function(){},onApprove:function(){return true},onDeny:function(){return true},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",legacy:"legacy",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}})(jQuery,window,document);