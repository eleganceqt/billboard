/*!
 * # Fomantic-UI - Form Validation
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.isFunction=h.isFunction||function(a){return typeof a==="function"&&typeof a.nodeType!=="number"};e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.form=function(a){var c=h(this),p=c.selector||"",s=new Date().getTime(),d=[],o=arguments[0],q=arguments[1],t=(typeof o=="string"),b=[].slice.call(arguments,1),r;c.each(function(){var Y=h(this),ag=this,k=[],ac=false,X,i,j,R,aa,Z,af,O,S,m,Q,ae,W,V,n,ad,ab,U=false,T=false,P=["clean","clean"],l,ah;ah={initialize:function(){ah.get.settings();if(t){if(l===g){ah.instantiate()}ah.invoke(o)}else{if(l!==g){l.invoke("destroy")}ah.verbose("Initializing form validation",Y,O);ah.bindEvents();ah.set.defaults();ah.instantiate()}},instantiate:function(){ah.verbose("Storing instance of module",ah);l=ah;Y.data(ad,ah)},destroy:function(){ah.verbose("Destroying previous module",l);ah.removeEvents();Y.removeData(ad)},refresh:function(){ah.verbose("Refreshing selector cache");X=Y.find(Q.field);i=Y.find(Q.group);j=Y.find(Q.message);R=Y.find(Q.prompt);aa=Y.find(Q.submit);Z=Y.find(Q.clear);af=Y.find(Q.reset)},submit:function(){ah.verbose("Submitting form",Y);U=true;Y.submit()},attachEvents:function(v,u){u=u||"submit";h(v).on("click"+ab,function(w){ah[u]();w.preventDefault()})},bindEvents:function(){ah.verbose("Attaching form events");Y.on("submit"+ab,ah.validate.form).on("blur"+ab,Q.field,ah.event.field.blur).on("click"+ab,Q.submit,ah.submit).on("click"+ab,Q.reset,ah.reset).on("click"+ab,Q.clear,ah.clear);if(O.keyboardShortcuts){Y.on("keydown"+ab,Q.field,ah.event.field.keydown)}X.each(function(y,w){var u=h(w),x=u.prop("type"),v=ah.get.changeEvent(x,u);u.on(v+ab,ah.event.field.change)});if(O.preventLeaving){h(e).on("beforeunload"+ab,ah.event.beforeUnload)}X.on("change click keyup keydown blur",function(u){h(this).trigger(u.type+".dirty")});X.on("change.dirty click.dirty keyup.dirty keydown.dirty blur.dirty",ah.determine.isDirty);Y.on("dirty"+ab,function(u){O.onDirty.call()});Y.on("clean"+ab,function(u){O.onClean.call()})},clear:function(){X.each(function(B,D){var x=h(D),u=x.parent(),v=x.closest(i),w=v.find(Q.prompt),F=x.closest(Q.uiCalendar),A=x.data(m.defaultValue)||"",C=u.is(Q.uiCheckbox),y=u.is(Q.uiDropdown),E=(F.length>0),z=v.hasClass(ae.error);if(z){ah.verbose("Resetting error on field",v);v.removeClass(ae.error);w.remove()}if(y){ah.verbose("Resetting dropdown value",u,A);u.dropdown("clear")}else{if(C){x.prop("checked",false)}else{if(E){F.calendar("clear")}else{ah.verbose("Resetting field value",x,A);x.val("")}}}})},reset:function(){X.each(function(B,D){var x=h(D),u=x.parent(),v=x.closest(i),F=x.closest(Q.uiCalendar),w=v.find(Q.prompt),A=x.data(m.defaultValue),C=u.is(Q.uiCheckbox),y=u.is(Q.uiDropdown),E=(F.length>0),z=v.hasClass(ae.error);if(A===g){return}if(z){ah.verbose("Resetting error on field",v);v.removeClass(ae.error);w.remove()}if(y){ah.verbose("Resetting dropdown value",u,A);u.dropdown("restore defaults")}else{if(C){ah.verbose("Resetting checkbox value",u,A);x.prop("checked",A)}else{if(E){F.calendar("set date",A)}else{ah.verbose("Resetting field value",x,A);x.val(A)}}}});ah.determine.isDirty()},determine:{isValid:function(){var u=true;h.each(S,function(v,w){if(!(ah.validate.field(w,v,true))){u=false}});return u},isDirty:function(u){var v=false;X.each(function(A,x){var z=h(x),y=(z.filter(Q.checkbox).length>0),w;if(y){w=ah.is.checkboxDirty(z)}else{w=ah.is.fieldDirty(z)}z.data(O.metadata.isDirty,w);v|=w});if(v){ah.set.dirty()}else{ah.set.clean()}if(u&&u.namespace==="dirty"){u.stopImmediatePropagation();u.preventDefault()}}},is:{bracketedRule:function(u){return(u.type&&u.type.match(O.regExp.bracket))},shorthandFields:function(w){var v=Object.keys(w),u=w[v[0]];return ah.is.shorthandRules(u)},shorthandRules:function(u){return(typeof u=="string"||Array.isArray(u))},empty:function(u){if(!u||u.length===0){return true}else{if(u.is(Q.checkbox)){return !u.is(":checked")}else{return ah.is.blank(u)}}},blank:function(u){return h.trim(u.val())===""},valid:function(v){var u=true;if(v){ah.verbose("Checking if field is valid",v);return ah.validate.field(S[v],v,false)}else{ah.verbose("Checking if form is valid");h.each(S,function(w,x){if(!ah.is.valid(w)){u=false}});return u}},dirty:function(){return T},clean:function(){return !T},fieldDirty:function(x){var y=x.data(m.defaultValue);if(y==null){y=""}var v=x.val();if(v==null){v=""}var z=/^(true|false)$/i;var w=z.test(y)&&z.test(v);if(w){var u=new RegExp("^"+y+"$","i");return !u.test(v)}return v!==y},checkboxDirty:function(v){var w=v.data(m.defaultValue);var u=v.is(":checked");return w!==u},justDirty:function(){return(P[0]==="dirty")},justClean:function(){return(P[0]==="clean")}},removeEvents:function(){Y.off(ab);X.off(ab);aa.off(ab);X.off(ab)},event:{field:{keydown:function(w){var x=h(this),z=w.which,A=x.is(Q.input),y=x.is(Q.checkbox),u=(x.closest(Q.uiDropdown).length>0),v={enter:13,escape:27};if(z==v.escape){ah.verbose("Escape key pressed blurring field");x.blur()}if(!w.ctrlKey&&z==v.enter&&A&&!u&&!y){if(!ac){x.one("keyup"+ab,ah.event.field.keyup);ah.submit();ah.debug("Enter pressed on input submitting form")}ac=true}},keyup:function(){ac=false},blur:function(v){var w=h(this),u=w.closest(i),x=ah.get.validation(w);if(u.hasClass(ae.error)){ah.debug("Revalidating field",w,x);if(x){ah.validate.field(x)}}else{if(O.on=="blur"){if(x){ah.validate.field(x)}}}},change:function(v){var w=h(this),u=w.closest(i),x=ah.get.validation(w);if(x&&(O.on=="change"||(u.hasClass(ae.error)&&O.revalidate))){clearTimeout(ah.timer);ah.timer=setTimeout(function(){ah.debug("Revalidating field",w,ah.get.validation(w));ah.validate.field(x)},O.delay)}}},beforeUnload:function(u){if(ah.is.dirty()&&!U){var u=u||e.event;if(u){u.returnValue=O.text.leavingMessage}return O.text.leavingMessage}}},get:{ancillaryValue:function(u){if(!u.type||(!u.value&&!ah.is.bracketedRule(u))){return false}return(u.value!==g)?u.value:u.type.match(O.regExp.bracket)[1]+""},ruleName:function(u){if(ah.is.bracketedRule(u)){return u.type.replace(u.type.match(O.regExp.bracket)[0],"")}return u.type},changeEvent:function(v,u){if(v=="checkbox"||v=="radio"||v=="hidden"||u.is("select")){return"change"}else{return ah.get.inputEvent()}},inputEvent:function(){return(f.createElement("input").oninput!==g)?"input":(f.createElement("input").onpropertychange!==g)?"propertychange":"keyup"},fieldsFromShorthand:function(v){var u={};h.each(v,function(x,w){if(typeof w=="string"){w=[w]}u[x]={rules:[]};h.each(w,function(z,y){u[x].rules.push({type:y})})});return u},prompt:function(A,y){var x=ah.get.ruleName(A),C=ah.get.ancillaryValue(A),z=ah.get.field(y.identifier),w=z.val(),D=h.isFunction(A.prompt)?A.prompt(w):A.prompt||O.prompt[x]||O.text.unspecifiedRule,v=(D.search("{value}")!==-1),u=(D.search("{name}")!==-1),B,E;if(v){D=D.replace("{value}",z.val())}if(u){B=z.closest(Q.group).find("label").eq(0);E=(B.length==1)?B.text():z.prop("placeholder")||O.text.unspecifiedField;D=D.replace("{name}",E)}D=D.replace("{identifier}",y.identifier);D=D.replace("{ruleValue}",C);if(!A.prompt){ah.verbose("Using default validation prompt for type",D,x)}return D},settings:function(){if(h.isPlainObject(a)){var u=Object.keys(a),v=(u.length>0)?(a[u[0]].identifier!==g&&a[u[0]].rules!==g):false;if(v){O=h.extend(true,{},h.fn.form.settings,q);S=h.extend({},h.fn.form.settings.defaults,a);ah.error(O.error.oldSyntax,ag);ah.verbose("Extending settings from legacy parameters",S,O)}else{if(a.fields&&ah.is.shorthandFields(a.fields)){a.fields=ah.get.fieldsFromShorthand(a.fields)}O=h.extend(true,{},h.fn.form.settings,a);S=h.extend({},h.fn.form.settings.defaults,O.fields);ah.verbose("Extending settings",S,O)}}else{O=h.fn.form.settings;S=h.fn.form.settings.defaults;ah.verbose("Using default form validation",S,O)}n=O.namespace;m=O.metadata;Q=O.selector;ae=O.className;W=O.regExp;V=O.error;ad="module-"+n;ab="."+n;l=Y.data(ad);ah.refresh()},field:function(v){ah.verbose("Finding field with identifier",v);v=ah.escape.string(v);var u;if((u=X.filter("#"+v)).length>0){return u}if((u=X.filter('[name="'+v+'"]')).length>0){return u}if((u=X.filter('[name="'+v+'[]"]')).length>0){return u}if((u=X.filter("[data-"+m.validate+'="'+v+'"]')).length>0){return u}return h("<input/>")},fields:function(v){var u=h();h.each(v,function(w,x){u=u.add(ah.get.field(x))});return u},validation:function(u){var v,w;if(!S){return false}h.each(S,function(x,y){w=y.identifier||x;h.each(ah.get.field(w),function(z,A){if(A==u[0]){y.identifier=w;v=y;return false}})});return v||false},value:function(u){var w=[],v;w.push(u);v=ah.get.values.call(ag,w);return v[u]},values:function(w){var u=Array.isArray(w)?ah.get.fields(w):X,v={};u.each(function(y,I){var J=h(I),G=J.closest(Q.uiCalendar),E=J.prop("name"),H=J.val(),B=J.is(Q.checkbox),F=J.is(Q.radio),z=(E.indexOf("[]")!==-1),D=(G.length>0),A=(B)?J.is(":checked"):false;if(E){if(z){E=E.replace("[]","");if(!v[E]){v[E]=[]}if(B){if(A){v[E].push(H||true)}else{v[E].push(false)}}else{v[E].push(H)}}else{if(F){if(v[E]===g||v[E]==false){v[E]=(A)?H||true:false}}else{if(B){if(A){v[E]=H||true}else{v[E]=false}}else{if(D){var C=G.calendar("get date");if(C!==null){if(O.dateHandling=="date"){v[E]=C}else{if(O.dateHandling=="input"){v[E]=G.calendar("get input date")}else{if(O.dateHandling=="formatter"){var x=G.calendar("setting","type");switch(x){case"date":v[E]=O.formatter.date(C);break;case"datetime":v[E]=O.formatter.datetime(C);break;case"time":v[E]=O.formatter.time(C);break;case"month":v[E]=O.formatter.month(C);break;case"year":v[E]=O.formatter.year(C);break;default:ah.debug("Wrong calendar mode",G,x);v[E]=""}}}}}else{v[E]=""}}else{v[E]=H}}}}}});return v},dirtyFields:function(){return X.filter(function(v,u){return h(u).data(m.isDirty)})}},has:{field:function(u){ah.verbose("Checking for existence of a field with identifier",u);u=ah.escape.string(u);if(typeof u!=="string"){ah.error(V.identifier,u)}if(X.filter("#"+u).length>0){return true}else{if(X.filter('[name="'+u+'"]').length>0){return true}else{if(X.filter("[data-"+m.validate+'="'+u+'"]').length>0){return true}}}return false}},escape:{string:function(u){u=String(u);return u.replace(W.escape,"\\$&")}},add:{rule:function(v,u){ah.add.field(v,u)},field:function(v,u){var w={};if(ah.is.shorthandRules(u)){u=Array.isArray(u)?u:[u];w[v]={rules:[]};h.each(u,function(y,x){w[v].rules.push({type:x})})}else{w[v]=u}S=h.extend({},S,w);ah.debug("Adding rules",w,S)},fields:function(u){var v;if(u&&ah.is.shorthandFields(u)){v=ah.get.fieldsFromShorthand(u)}else{v=u}S=h.extend({},S,v)},prompt:function(x,u,A){var w=ah.get.field(x),v=w.closest(i),y=v.children(Q.prompt),z=(y.length!==0);u=(typeof u=="string")?[u]:u;ah.verbose("Adding field error state",x);if(!A){v.addClass(ae.error)}if(O.inline){if(!z){y=O.templates.prompt(u,ae.label);y.appendTo(v)}y.html(u[0]);if(!z){if(O.transition&&h.fn.transition!==g&&Y.transition("is supported")){ah.verbose("Displaying error with css transition",O.transition);y.transition(O.transition+" in",O.duration)}else{ah.verbose("Displaying error with fallback javascript animation");y.fadeIn(O.duration)}}else{ah.verbose("Inline errors are disabled, no inline error added",x)}}},errors:function(u){ah.debug("Adding form error messages",u);ah.set.error();j.html(O.templates.error(u))}},remove:{rule:function(v,w){var u=Array.isArray(w)?w:[w];if(S[v]===g||!Array.isArray(S[v].rules)){return}if(w===g){ah.debug("Removed all rules");S[v].rules=[];return}h.each(S[v].rules,function(y,x){if(x&&u.indexOf(x.type)!==-1){ah.debug("Removed rule",x.type);S[v].rules.splice(y,1)}})},field:function(u){var v=Array.isArray(u)?u:[u];h.each(v,function(x,w){ah.remove.rule(w)})},rules:function(v,u){if(Array.isArray(v)){h.each(v,function(x,w){ah.remove.rule(w,u)})}else{ah.remove.rule(v,u)}},fields:function(u){ah.remove.field(u)},prompt:function(w){var v=ah.get.field(w),u=v.closest(i),x=u.children(Q.prompt);u.removeClass(ae.error);if(O.inline&&x.is(":visible")){ah.verbose("Removing prompt for field",w);if(O.transition&&h.fn.transition!==g&&Y.transition("is supported")){x.transition(O.transition+" out",O.duration,function(){x.remove()})}else{x.fadeOut(O.duration,function(){x.remove()})}}}},set:{success:function(){Y.removeClass(ae.error).addClass(ae.success)},defaults:function(){X.each(function(A,x){var z=h(x),u=z.parent(),y=(z.filter(Q.checkbox).length>0),v=u.is(Q.uiDropdown),w=(y)?z.is(":checked"):z.val();if(v){u.dropdown("save defaults")}z.data(m.defaultValue,w);z.data(m.isDirty,false)})},error:function(){Y.removeClass(ae.success).addClass(ae.error)},value:function(u,v){var w={};w[u]=v;return ah.set.values.call(ag,w)},values:function(u){if(h.isEmptyObject(u)){return}h.each(u,function(w,x){var z=ah.get.field(w),v=z.parent(),C=Array.isArray(x),D=v.is(Q.uiCheckbox),A=v.is(Q.uiDropdown),E=(z.is(Q.radio)&&D),y=(z.length>0),B;if(y){if(C&&D){ah.verbose("Selecting multiple",x,z);v.checkbox("uncheck");h.each(x,function(G,F){B=z.filter('[value="'+F+'"]');v=B.parent();if(B.length>0){v.checkbox("check")}})}else{if(E){ah.verbose("Selecting radio value",x,z);z.filter('[value="'+x+'"]').parent(Q.uiCheckbox).checkbox("check")}else{if(D){ah.verbose("Setting checkbox value",x,v);if(x===true){v.checkbox("check")}else{v.checkbox("uncheck")}}else{if(A){ah.verbose("Setting dropdown value",x,v);v.dropdown("set selected",x)}else{ah.verbose("Setting field value",x,z);z.val(x)}}}}}})},dirty:function(){ah.verbose("Setting state dirty");T=true;P[0]=P[1];P[1]="dirty";if(ah.is.justClean()){Y.trigger("dirty")}},clean:function(){ah.verbose("Setting state clean");T=false;P[0]=P[1];P[1]="clean";if(ah.is.justDirty()){Y.trigger("clean")}},asClean:function(){ah.set.defaults();ah.set.clean()},asDirty:function(){ah.set.defaults();ah.set.dirty()}},validate:{form:function(u,v){var w=ah.get.values();if(ac){return false}k=[];if(ah.determine.isValid()){ah.debug("Form has no validation errors, submitting");ah.set.success();if(v!==true){return O.onSuccess.call(ag,u,w)}}else{ah.debug("Form has errors");ah.set.error();if(!O.inline){ah.add.errors(k)}if(u&&Y.data("moduleApi")!==g){u.stopImmediatePropagation()}if(v!==true){return O.onFailure.call(ag,k,w)}}},field:function(y,v,u){u=(u!==g)?u:true;if(typeof y=="string"){ah.verbose("Validating field",y);v=y;y=S[y]}var A=y.identifier||v,z=ah.get.field(A),C=(y.depends)?ah.get.field(y.depends):false,B=true,x=[];if(!y.identifier){ah.debug("Using field name as identifier",A);y.identifier=A}var w=true;h.each(z,function(){if(!h(this).prop("disabled")){w=false;return false}});if(w){ah.debug("Field is disabled. Skipping",A)}else{if(y.optional&&ah.is.blank(z)){ah.debug("Field is optional and blank. Skipping",A)}else{if(y.depends&&ah.is.empty(C)){ah.debug("Field depends on another value that is not present or empty. Skipping",C)}else{if(y.rules!==g){z.closest(i).removeClass(ae.error);h.each(y.rules,function(F,D){if(ah.has.field(A)){var E=ah.validate.rule(y,D,true)||[];if(E.length>0){ah.debug("Field is invalid",A,D.type);x.push(ah.get.prompt(D,y));B=false;if(u){h(E).closest(i).addClass(ae.error)}}}})}}}}if(B){if(u){ah.remove.prompt(A,x);O.onValid.call(z)}}else{if(u){k=k.concat(x);ah.add.prompt(A,x,true);O.onInvalid.call(z,x)}return false}return true},rule:function(w,y,C){var x=ah.get.field(w.identifier),A=ah.get.ancillaryValue(y),v=ah.get.ruleName(y),B=O.rules[v],z=[],D=x.is(Q.checkbox),u=function(E){var F=(D?h(E).filter(":checked").val():h(E).val());F=(F===g||F===""||F===null)?"":(O.shouldTrim)?h.trim(F+""):String(F+"");return B.call(E,F,A,Y)};if(!h.isFunction(B)){ah.error(V.noRule,v);return}if(D){if(!u(x)){z=x}}else{h.each(x,function(F,E){if(!u(E)){z.push(E)}})}return C?z:!(z.length>0)}},setting:function(v,u){if(h.isPlainObject(v)){h.extend(true,O,v)}else{if(u!==g){O[v]=u}else{return O[v]}}},internal:function(v,u){if(h.isPlainObject(v)){h.extend(true,ah,v)}else{if(u!==g){ah[v]=u}else{return ah[v]}}},debug:function(){if(!O.silent&&O.debug){if(O.performance){ah.performance.log(arguments)}else{ah.debug=Function.prototype.bind.call(console.info,console,O.name+":");ah.debug.apply(console,arguments)}}},verbose:function(){if(!O.silent&&O.verbose&&O.debug){if(O.performance){ah.performance.log(arguments)}else{ah.verbose=Function.prototype.bind.call(console.info,console,O.name+":");ah.verbose.apply(console,arguments)}}},error:function(){if(!O.silent){ah.error=Function.prototype.bind.call(console.error,console,O.name+":");ah.error.apply(console,arguments)}},performance:{log:function(v){var w,u,x;if(O.performance){w=new Date().getTime();x=s||w;u=w-x;s=w;d.push({Name:v[0],Arguments:[].slice.call(v,1)||"",Element:ag,"Execution Time":u})}clearTimeout(ah.performance.timer);ah.performance.timer=setTimeout(ah.performance.display,500)},display:function(){var u=O.name+":",v=0;s=false;clearTimeout(ah.performance.timer);h.each(d,function(x,w){v+=w["Execution Time"]});u+=" "+v+"ms";if(p){u+=" '"+p+"'"}if(c.length>1){u+=" ("+c.length+")"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(u);if(console.table){console.table(d)}else{h.each(d,function(x,w){console.log(w.Name+": "+w["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(v,z,x){var y=l,u,w,A;z=z||b;x=ag||x;if(typeof v=="string"&&y!==g){v=v.split(/[\. ]/);u=v.length-1;h.each(v,function(D,B){var C=(D!=u)?B+v[D+1].charAt(0).toUpperCase()+v[D+1].slice(1):v;if(h.isPlainObject(y[C])&&(D!=u)){y=y[C]}else{if(y[C]!==g){w=y[C];return false}else{if(h.isPlainObject(y[B])&&(D!=u)){y=y[B]}else{if(y[B]!==g){w=y[B];return false}else{return false}}}}})}if(h.isFunction(w)){A=w.apply(x,z)}else{if(w!==g){A=w}}if(Array.isArray(r)){r.push(A)}else{if(r!==g){r=[r,A]}else{if(A!==g){r=A}}}return w}};ah.initialize()});return(r!==g)?r:this};h.fn.form.settings={name:"Form",namespace:"form",debug:false,verbose:false,performance:true,fields:false,keyboardShortcuts:true,on:"submit",inline:false,delay:200,revalidate:true,shouldTrim:true,transition:"scale",duration:200,preventLeaving:false,dateHandling:"date",onValid:function(){},onInvalid:function(){},onSuccess:function(){return true},onFailure:function(){return false},onDirty:function(){},onClean:function(){},metadata:{defaultValue:"default",validate:"validate",isDirty:"isDirty"},regExp:{htmlID:/^[a-zA-Z][\w:.-]*$/g,bracket:/\[(.*)\]/i,decimal:/^\d+\.?\d*$/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|:,=@]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field",leavingMessage:"There are unsaved changes on this page which will be discarded if you continue."},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} must contain "{ruleValue}"',containExactly:'{name} must contain exactly "{ruleValue}"',doesntContain:'{name} cannot contain  "{ruleValue}"',doesntContainExactly:'{name} cannot contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown",uiCalendar:".ui.calendar"},className:{error:"error",label:"ui basic red pointing prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(a){var b='<ul class="list">';h.each(a,function(d,c){b+="<li>"+c+"</li>"});b+="</ul>";return h(b)},prompt:function(a,b){return h("<div/>").addClass(b).html(a[0])}},formatter:{date:function(a){return Intl.DateTimeFormat("en-GB").format(a)},datetime:function(a){return Intl.DateTimeFormat("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(a)},time:function(a){return Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(a)},month:function(a){return Intl.DateTimeFormat("en-GB",{month:"2-digit",year:"numeric"}).format(a)},year:function(a){return Intl.DateTimeFormat("en-GB",{year:"numeric"}).format(a)}},rules:{empty:function(a){return !(a===g||""===a||Array.isArray(a)&&a.length===0)},checked:function(){return(h(this).filter(":checked").length>0)},email:function(a){return h.fn.form.settings.regExp.email.test(a)},url:function(a){return h.fn.form.settings.regExp.url.test(a)},regExp:function(a,b){if(b instanceof RegExp){return a.match(b)}var c=b.match(h.fn.form.settings.regExp.flags),d;if(c){b=(c.length>=2)?c[1]:b;d=(c.length>=3)?c[2]:""}return a.match(new RegExp(b,d))},integer:function(b,k){var c=h.fn.form.settings.regExp.integer,d,l,a;if(!k||["",".."].indexOf(k)!==-1){}else{if(k.indexOf("..")==-1){if(c.test(k)){d=l=k-0}}else{a=k.split("..",2);if(c.test(a[0])){d=a[0]-0}if(c.test(a[1])){l=a[1]-0}}}return(c.test(b)&&(d===g||b>=d)&&(l===g||b<=l))},decimal:function(a){return h.fn.form.settings.regExp.decimal.test(a)},number:function(a){return h.fn.form.settings.regExp.number.test(a)},is:function(b,a){a=(typeof a=="string")?a.toLowerCase():a;b=(typeof b=="string")?b.toLowerCase():b;return(b==a)},isExactly:function(b,a){return(b==a)},not:function(a,b){a=(typeof a=="string")?a.toLowerCase():a;b=(typeof b=="string")?b.toLowerCase():b;return(a!=b)},notExactly:function(a,b){return(a!=b)},contains:function(b,a){a=a.replace(h.fn.form.settings.regExp.escape,"\\$&");return(b.search(new RegExp(a,"i"))!==-1)},containsExactly:function(b,a){a=a.replace(h.fn.form.settings.regExp.escape,"\\$&");return(b.search(new RegExp(a))!==-1)},doesntContain:function(b,a){a=a.replace(h.fn.form.settings.regExp.escape,"\\$&");return(b.search(new RegExp(a,"i"))===-1)},doesntContainExactly:function(b,a){a=a.replace(h.fn.form.settings.regExp.escape,"\\$&");return(b.search(new RegExp(a))===-1)},minLength:function(a,b){return(a!==g)?(a.length>=b):false},length:function(a,b){return(a!==g)?(a.length>=b):false},exactLength:function(a,b){return(a!==g)?(a.length==b):false},maxLength:function(a,b){return(a!==g)?(a.length<=b):false},match:function(a,d,b){var c,j;if((j=b.find('[data-validate="'+d+'"]')).length>0){c=j.val()}else{if((j=b.find("#"+d)).length>0){c=j.val()}else{if((j=b.find('[name="'+d+'"]')).length>0){c=j.val()}else{if((j=b.find('[name="'+d+'[]"]')).length>0){c=j}}}}return(c!==g)?(a.toString()==c.toString()):false},different:function(a,d,b){var c,j;if((j=b.find('[data-validate="'+d+'"]')).length>0){c=j.val()}else{if((j=b.find("#"+d)).length>0){c=j.val()}else{if((j=b.find('[name="'+d+'"]')).length>0){c=j.val()}else{if((j=b.find('[name="'+d+'[]"]')).length>0){c=j}}}}return(c!==g)?(a.toString()!==c.toString()):false},creditCard:function(a,t){var w={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},x={},r=false,v=(typeof t=="string")?t.split(","):false,c,s;if(typeof a!=="string"||a.length===0){return}a=a.replace(/[\-]/g,"");if(v){h.each(v,function(j,i){s=w[i];if(s){x={length:(h.inArray(a.length,s.length)!==-1),pattern:(a.search(s.pattern)!==-1)};if(x.length&&x.pattern){r=true}}});if(!r){return false}}c={number:(h.inArray(a.length,w.unionPay.length)!==-1),pattern:(a.search(w.unionPay.pattern)!==-1)};if(c.number&&c.pattern){return true}var u=a.length,b=0,q=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],d=0;while(u--){d+=q[b][parseInt(a.charAt(u),10)];b^=1}return(d%10===0&&d>0)},minCount:function(a,b){if(b==0){return true}if(b==1){return(a!=="")}return(a.split(",").length>=b)},exactCount:function(b,a){if(a==0){return(b==="")}if(a==1){return(b!==""&&b.search(",")===-1)}return(b.split(",").length==a)},maxCount:function(a,b){if(b==0){return false}if(b==1){return(a.search(",")===-1)}return(a.split(",").length<=b)}}}})(jQuery,window,document);