/*!
 * # Fomantic-UI - Shape
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){c.isFunction=c.isFunction||function(e){return typeof e==="function"&&typeof e.nodeType!=="number"};b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.shape=function(m){var k=c(this),f=new Date().getTime(),j=[],i=arguments[0],e=(typeof i=="string"),l=[].slice.call(arguments,1),h=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(n){setTimeout(n,0)},g;k.each(function(){var n=k.selector||"",C=(c.isPlainObject(m))?c.extend(true,{},c.fn.shape.settings,m):c.extend({},c.fn.shape.settings),x=C.namespace,B=C.selector,A=C.error,q=C.className,z="."+x,y="module-"+x,s=c(this),w=s.find(">"+B.sides),t=w.find(">"+B.side),v=false,r,E,p=this,D=s.data(y),o;o={initialize:function(){o.verbose("Initializing module for",p);o.set.defaultSide();o.instantiate()},instantiate:function(){o.verbose("Storing instance of module",o);D=o;s.data(y,D)},destroy:function(){o.verbose("Destroying previous module for",p);s.removeData(y).off(z)},refresh:function(){o.verbose("Refreshing selector cache for",p);s=c(p);w=c(this).find(B.sides);t=c(this).find(B.side)},repaint:function(){o.verbose("Forcing repaint event");var G=w[0]||a.createElement("div"),F=G.offsetWidth},animate:function(F,G){o.verbose("Animating box with properties",F);G=G||function(H){o.verbose("Executing animation callback");if(H!==d){H.stopPropagation()}o.reset();o.set.active()};C.beforeChange.call(E[0]);if(o.get.transitionEvent()){o.verbose("Starting CSS animation");s.addClass(q.animating);w.css(F).one(o.get.transitionEvent(),G);o.set.duration(C.duration);h(function(){s.addClass(q.animating);r.addClass(q.hidden)})}else{G()}},queue:function(F){o.debug("Queueing animation of",F);w.one(o.get.transitionEvent(),function(){o.debug("Executing queued animation");setTimeout(function(){s.shape(F)},0)})},reset:function(){o.verbose("Animating states reset");s.removeClass(q.animating).attr("style","").removeAttr("style");w.attr("style","").removeAttr("style");t.attr("style","").removeAttr("style").removeClass(q.hidden);E.removeClass(q.animating).attr("style","").removeAttr("style")},is:{complete:function(){return(t.filter("."+q.active)[0]==E[0])},animating:function(){return s.hasClass(q.animating)},hidden:function(){return s.closest(":hidden").length>0}},set:{defaultSide:function(){r=t.filter("."+C.className.active);E=(r.next(B.side).length>0)?r.next(B.side):t.first();v=false;o.verbose("Active side set to",r);o.verbose("Next side set to",E)},duration:function(F){F=F||C.duration;F=(typeof F=="number")?F+"ms":F;o.verbose("Setting animation duration",F);if(C.duration||C.duration===0){w.add(t).css({"-webkit-transition-duration":F,"-moz-transition-duration":F,"-ms-transition-duration":F,"-o-transition-duration":F,"transition-duration":F})}},currentStageSize:function(){var H=t.filter("."+C.className.active),G=H.outerWidth(true),F=H.outerHeight(true);s.css({width:G,height:F})},stageSize:function(){var K=s.clone().addClass(q.loading),F=K.find(">"+B.sides+">"+B.side),I=F.filter("."+C.className.active),J=(v)?F.eq(v):(I.next(B.side).length>0)?I.next(B.side):F.first(),H=(C.width==="next")?J.outerWidth(true):(C.width==="initial")?s.width():C.width,G=(C.height==="next")?J.outerHeight(true):(C.height==="initial")?s.height():C.height;I.removeClass(q.active);J.addClass(q.active);K.insertAfter(s);K.remove();if(C.width!=="auto"){s.css("width",H+C.jitter);o.verbose("Specifying width during animation",H)}if(C.height!=="auto"){s.css("height",G+C.jitter);o.verbose("Specifying height during animation",G)}},nextSide:function(F){v=F;E=t.filter(F);v=t.index(E);if(E.length===0){o.set.defaultSide();o.error(A.side)}o.verbose("Next side manually set to",E)},active:function(){o.verbose("Setting new side to active",E);t.removeClass(q.active);E.addClass(q.active);C.onChange.call(E[0]);o.set.defaultSide()}},flip:{to:function(H,G){if(o.is.hidden()){o.debug("Module not visible",E);return}if(o.is.complete()&&!o.is.animating()&&!C.allowRepeats){o.debug("Side already visible",E);return}var F=o.get.transform[H]();if(!o.is.animating()){o.debug("Flipping "+H,E);o.set.stageSize();o.stage[G]();o.animate(F)}else{o.queue("flip "+H)}},up:function(){o.flip.to("up","above")},down:function(){o.flip.to("down","below")},left:function(){o.flip.to("left","left")},right:function(){o.flip.to("right","right")},over:function(){o.flip.to("over","behind")},back:function(){o.flip.to("back","behind")}},get:{transform:{up:function(){var F=r.outerHeight(true)/2,G=E.outerHeight(true)-F;return{transform:"translateY("+G+"px) translateZ(-"+F+"px) rotateX(-90deg)"}},down:function(){var F={z:r.outerHeight(true)/2};return{transform:"translateY(-"+F.z+"px) translateZ(-"+F.z+"px) rotateX(90deg)"}},left:function(){var F=r.outerWidth(true)/2,G=E.outerWidth(true)-F;return{transform:"translateX("+G+"px) translateZ(-"+F+"px) rotateY(90deg)"}},right:function(){var F={z:r.outerWidth(true)/2};return{transform:"translateX(-"+F.z+"px) translateZ(-"+F.z+"px) rotateY(-90deg)"}},over:function(){var F={x:-((r.outerWidth(true)-E.outerWidth(true))/2)};return{transform:"translateX("+F.x+"px) rotateY(180deg)"}},back:function(){var F={x:-((r.outerWidth(true)-E.outerWidth(true))/2)};return{transform:"translateX("+F.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var F=a.createElement("element"),G={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},H;for(H in G){if(F.style[H]!==d){return G[H]}}},nextSide:function(){return(r.next(B.side).length>0)?r.next(B.side):t.first()}},stage:{above:function(){var F={origin:((r.outerHeight(true)-E.outerHeight(true))/2),depth:{active:(E.outerHeight(true)/2),next:(r.outerHeight(true)/2)}};o.verbose("Setting the initial animation position as above",E,F);r.css({transform:"rotateX(0deg)"});E.addClass(q.animating).css({top:F.origin+"px",transform:"rotateX(90deg) translateZ("+F.depth.next+"px) translateY(-"+F.depth.active+"px)"})},below:function(){var F={origin:((r.outerHeight(true)-E.outerHeight(true))/2),depth:{active:(E.outerHeight(true)/2),next:(r.outerHeight(true)/2)}};o.verbose("Setting the initial animation position as below",E,F);r.css({transform:"rotateX(0deg)"});E.addClass(q.animating).css({top:F.origin+"px",transform:"rotateX(-90deg) translateZ("+F.depth.next+"px) translateY("+F.depth.active+"px)"})},left:function(){var F={active:r.outerWidth(true),next:E.outerWidth(true)},G={origin:((F.active-F.next)/2),depth:{active:(F.next/2),next:(F.active/2)}};o.verbose("Setting the initial animation position as left",E,G);r.css({transform:"rotateY(0deg)"});E.addClass(q.animating).css({left:G.origin+"px",transform:"rotateY(-90deg) translateZ("+G.depth.next+"px) translateX(-"+G.depth.active+"px)"})},right:function(){var F={active:r.outerWidth(true),next:E.outerWidth(true)},G={origin:((F.active-F.next)/2),depth:{active:(F.next/2),next:(F.active/2)}};o.verbose("Setting the initial animation position as right",E,G);r.css({transform:"rotateY(0deg)"});E.addClass(q.animating).css({left:G.origin+"px",transform:"rotateY(90deg) translateZ("+G.depth.next+"px) translateX("+G.depth.active+"px)"})},behind:function(){var F={active:r.outerWidth(true),next:E.outerWidth(true)},G={origin:((F.active-F.next)/2),depth:{active:(F.next/2),next:(F.active/2)}};o.verbose("Setting the initial animation position as behind",E,G);r.css({transform:"rotateY(0deg)"});E.addClass(q.animating).css({left:G.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(F,G){o.debug("Changing setting",F,G);if(c.isPlainObject(F)){c.extend(true,C,F)}else{if(G!==d){if(c.isPlainObject(C[F])){c.extend(true,C[F],G)}else{C[F]=G}}else{return C[F]}}},internal:function(F,G){if(c.isPlainObject(F)){c.extend(true,o,F)}else{if(G!==d){o[F]=G}else{return o[F]}}},debug:function(){if(!C.silent&&C.debug){if(C.performance){o.performance.log(arguments)}else{o.debug=Function.prototype.bind.call(console.info,console,C.name+":");o.debug.apply(console,arguments)}}},verbose:function(){if(!C.silent&&C.verbose&&C.debug){if(C.performance){o.performance.log(arguments)}else{o.verbose=Function.prototype.bind.call(console.info,console,C.name+":");o.verbose.apply(console,arguments)}}},error:function(){if(!C.silent){o.error=Function.prototype.bind.call(console.error,console,C.name+":");o.error.apply(console,arguments)}},performance:{log:function(H){var G,I,F;if(C.performance){G=new Date().getTime();F=f||G;I=G-F;f=G;j.push({Name:H[0],Arguments:[].slice.call(H,1)||"",Element:p,"Execution Time":I})}clearTimeout(o.performance.timer);o.performance.timer=setTimeout(o.performance.display,500)},display:function(){var G=C.name+":",F=0;f=false;clearTimeout(o.performance.timer);c.each(j,function(H,I){F+=I["Execution Time"]});G+=" "+F+"ms";if(n){G+=" '"+n+"'"}if(k.length>1){G+=" ("+k.length+")"}if((console.group!==d||console.table!==d)&&j.length>0){console.groupCollapsed(G);if(console.table){console.table(j)}else{c.each(j,function(H,I){console.log(I.Name+": "+I["Execution Time"]+"ms")})}console.groupEnd()}j=[]}},invoke:function(K,G,I){var H=D,L,J,F;G=G||l;I=p||I;if(typeof K=="string"&&H!==d){K=K.split(/[\. ]/);L=K.length-1;c.each(K,function(O,N){var M=(O!=L)?N+K[O+1].charAt(0).toUpperCase()+K[O+1].slice(1):K;if(c.isPlainObject(H[M])&&(O!=L)){H=H[M]}else{if(H[M]!==d){J=H[M];return false}else{if(c.isPlainObject(H[N])&&(O!=L)){H=H[N]}else{if(H[N]!==d){J=H[N];return false}else{return false}}}}})}if(c.isFunction(J)){F=J.apply(I,G)}else{if(J!==d){F=J}}if(Array.isArray(g)){g.push(F)}else{if(g!==d){g=[g,F]}else{if(F!==d){g=F}}}return J}};if(e){if(D===d){o.initialize()}var u=s.find("input");if(u.length>0){u.blur();setTimeout(function(){o.invoke(i)},150)}else{o.invoke(i)}}else{if(D!==d){D.invoke("destroy")}o.initialize()}});return(g!==d)?g:this};c.fn.shape.settings={name:"Shape",silent:false,debug:false,verbose:false,jitter:0,performance:true,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:false,duration:false,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}})(jQuery,window,document);