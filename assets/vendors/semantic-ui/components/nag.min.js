/*!
 * # Fomantic-UI - Nag
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(c,b,a,d){c.isFunction=c.isFunction||function(e){return typeof e==="function"&&typeof e.nodeType!=="number"};b=(typeof b!="undefined"&&b.Math==Math)?b:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();c.fn.nag=function(m){var k=c(this),h=k.selector||"",f=new Date().getTime(),j=[],i=arguments[0],e=(typeof i=="string"),l=[].slice.call(arguments,1),g;k.each(function(){var o=(c.isPlainObject(m))?c.extend(true,{},c.fn.nag.settings,m):c.extend({},c.fn.nag.settings),q=o.selector,u=o.error,p=o.namespace,x="."+p,s=p+"-module",v=c(this),t=(o.context)?c(o.context):c("body"),r=this,w=v.data(s),n;n={initialize:function(){n.verbose("Initializing element");v.on("click"+x,q.close,n.dismiss).data(s,n);if(o.detachable&&v.parent()[0]!==t[0]){v.detach().prependTo(t)}if(o.displayTime>0){setTimeout(n.hide,o.displayTime)}n.show()},destroy:function(){n.verbose("Destroying instance");v.removeData(s).off(x)},show:function(){if(n.should.show()&&!v.is(":visible")){n.debug("Showing nag",o.animation.show);if(o.animation.show=="fade"){v.fadeIn(o.duration,o.easing)}else{v.slideDown(o.duration,o.easing)}}},hide:function(){n.debug("Showing nag",o.animation.hide);if(o.animation.show=="fade"){v.fadeIn(o.duration,o.easing)}else{v.slideUp(o.duration,o.easing)}},onHide:function(){n.debug("Removing nag",o.animation.hide);v.remove();if(o.onHide){o.onHide()}},dismiss:function(y){if(o.storageMethod){n.storage.set(o.key,o.value)}n.hide();y.stopImmediatePropagation();y.preventDefault()},should:{show:function(){if(o.persist){n.debug("Persistent nag is set, can show nag");return true}if(n.storage.get(o.key)!=o.value.toString()){n.debug("Stored value is not set, can show nag",n.storage.get(o.key));return true}n.debug("Stored value is set, cannot show nag",n.storage.get(o.key));return false}},get:{storageOptions:function(){var y={};if(o.expires){y.expires=o.expires}if(o.domain){y.domain=o.domain}if(o.path){y.path=o.path}return y}},clear:function(){n.storage.remove(o.key)},storage:{set:function(z,A){var y=n.get.storageOptions();if(o.storageMethod=="localstorage"&&b.localStorage!==d){b.localStorage.setItem(z,A);n.debug("Value stored using local storage",z,A)}else{if(o.storageMethod=="sessionstorage"&&b.sessionStorage!==d){b.sessionStorage.setItem(z,A);n.debug("Value stored using session storage",z,A)}else{if(c.cookie!==d){c.cookie(z,A,y);n.debug("Value stored using cookie",z,A,y)}else{n.error(u.noCookieStorage);return}}}},get:function(y,z){var A;if(o.storageMethod=="localstorage"&&b.localStorage!==d){A=b.localStorage.getItem(y)}else{if(o.storageMethod=="sessionstorage"&&b.sessionStorage!==d){A=b.sessionStorage.getItem(y)}else{if(c.cookie!==d){A=c.cookie(y)}else{n.error(u.noCookieStorage)}}}if(A=="undefined"||A=="null"||A===d||A===null){A=d}return A},remove:function(z){var y=n.get.storageOptions();if(o.storageMethod=="localstorage"&&b.localStorage!==d){b.localStorage.removeItem(z)}else{if(o.storageMethod=="sessionstorage"&&b.sessionStorage!==d){b.sessionStorage.removeItem(z)}else{if(c.cookie!==d){c.removeCookie(z,y)}else{n.error(u.noStorage)}}}}},setting:function(y,z){n.debug("Changing setting",y,z);if(c.isPlainObject(y)){c.extend(true,o,y)}else{if(z!==d){if(c.isPlainObject(o[y])){c.extend(true,o[y],z)}else{o[y]=z}}else{return o[y]}}},internal:function(y,z){if(c.isPlainObject(y)){c.extend(true,n,y)}else{if(z!==d){n[y]=z}else{return n[y]}}},debug:function(){if(!o.silent&&o.debug){if(o.performance){n.performance.log(arguments)}else{n.debug=Function.prototype.bind.call(console.info,console,o.name+":");n.debug.apply(console,arguments)}}},verbose:function(){if(!o.silent&&o.verbose&&o.debug){if(o.performance){n.performance.log(arguments)}else{n.verbose=Function.prototype.bind.call(console.info,console,o.name+":");n.verbose.apply(console,arguments)}}},error:function(){if(!o.silent){n.error=Function.prototype.bind.call(console.error,console,o.name+":");n.error.apply(console,arguments)}},performance:{log:function(A){var z,B,y;if(o.performance){z=new Date().getTime();y=f||z;B=z-y;f=z;j.push({Name:A[0],Arguments:[].slice.call(A,1)||"",Element:r,"Execution Time":B})}clearTimeout(n.performance.timer);n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var z=o.name+":",y=0;f=false;clearTimeout(n.performance.timer);c.each(j,function(A,B){y+=B["Execution Time"]});z+=" "+y+"ms";if(h){z+=" '"+h+"'"}if((console.group!==d||console.table!==d)&&j.length>0){console.groupCollapsed(z);if(console.table){console.table(j)}else{c.each(j,function(A,B){console.log(B.Name+": "+B["Execution Time"]+"ms")})}console.groupEnd()}j=[]}},invoke:function(D,z,B){var A=w,E,C,y;z=z||l;B=r||B;if(typeof D=="string"&&A!==d){D=D.split(/[\. ]/);E=D.length-1;c.each(D,function(H,G){var F=(H!=E)?G+D[H+1].charAt(0).toUpperCase()+D[H+1].slice(1):D;if(c.isPlainObject(A[F])&&(H!=E)){A=A[F]}else{if(A[F]!==d){C=A[F];return false}else{if(c.isPlainObject(A[G])&&(H!=E)){A=A[G]}else{if(A[G]!==d){C=A[G];return false}else{n.error(u.method,D);return false}}}}})}if(c.isFunction(C)){y=C.apply(B,z)}else{if(C!==d){y=C}}if(Array.isArray(g)){g.push(y)}else{if(g!==d){g=[g,y]}else{if(y!==d){g=y}}}return C}};if(e){if(w===d){n.initialize()}n.invoke(i)}else{if(w!==d){w.invoke("destroy")}n.initialize()}});return(g!==d)?g:this};c.fn.nag.settings={name:"Nag",silent:false,debug:false,verbose:false,performance:true,namespace:"Nag",persist:false,displayTime:0,animation:{show:"slide",hide:"slide"},context:false,detachable:false,expires:30,domain:false,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}};c.extend(c.easing,{easeOutQuad:function(f,g,e,i,h){return -i*(g/=h)*(g-2)+e}})})(jQuery,window,document);