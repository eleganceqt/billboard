/*!
 * # Fomantic-UI - Nag
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.isFunction=h.isFunction||function(a){return typeof a==="function"&&typeof a.nodeType!=="number"};e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.nag=function(a){var c=h(this),o=c.selector||"",q=new Date().getTime(),d=[],n=arguments[0],r=(typeof n=="string"),b=[].slice.call(arguments,1),p;c.each(function(){var l=(h.isPlainObject(a))?h.extend(true,{},h.fn.nag.settings,a):h.extend({},h.fn.nag.settings),j=l.selector,B=l.error,k=l.namespace,y="."+k,D=k+"-module",A=h(this),C=(l.context)?h(l.context):h("body"),i=this,z=A.data(D),m;m={initialize:function(){m.verbose("Initializing element");A.on("click"+y,j.close,m.dismiss).data(D,m);if(l.detachable&&A.parent()[0]!==C[0]){A.detach().prependTo(C)}if(l.displayTime>0){setTimeout(m.hide,l.displayTime)}m.show()},destroy:function(){m.verbose("Destroying instance");A.removeData(D).off(y)},show:function(){if(m.should.show()&&!A.is(":visible")){m.debug("Showing nag",l.animation.show);if(l.animation.show=="fade"){A.fadeIn(l.duration,l.easing)}else{A.slideDown(l.duration,l.easing)}}},hide:function(){m.debug("Showing nag",l.animation.hide);if(l.animation.show=="fade"){A.fadeIn(l.duration,l.easing)}else{A.slideUp(l.duration,l.easing)}},onHide:function(){m.debug("Removing nag",l.animation.hide);A.remove();if(l.onHide){l.onHide()}},dismiss:function(s){if(l.storageMethod){m.storage.set(l.key,l.value)}m.hide();s.stopImmediatePropagation();s.preventDefault()},should:{show:function(){if(l.persist){m.debug("Persistent nag is set, can show nag");return true}if(m.storage.get(l.key)!=l.value.toString()){m.debug("Stored value is not set, can show nag",m.storage.get(l.key));return true}m.debug("Stored value is set, cannot show nag",m.storage.get(l.key));return false}},get:{storageOptions:function(){var s={};if(l.expires){s.expires=l.expires}if(l.domain){s.domain=l.domain}if(l.path){s.path=l.path}return s}},clear:function(){m.storage.remove(l.key)},storage:{set:function(t,s){var u=m.get.storageOptions();if(l.storageMethod=="localstorage"&&e.localStorage!==g){e.localStorage.setItem(t,s);m.debug("Value stored using local storage",t,s)}else{if(l.storageMethod=="sessionstorage"&&e.sessionStorage!==g){e.sessionStorage.setItem(t,s);m.debug("Value stored using session storage",t,s)}else{if(h.cookie!==g){h.cookie(t,s,u);m.debug("Value stored using cookie",t,s,u)}else{m.error(B.noCookieStorage);return}}}},get:function(u,t){var s;if(l.storageMethod=="localstorage"&&e.localStorage!==g){s=e.localStorage.getItem(u)}else{if(l.storageMethod=="sessionstorage"&&e.sessionStorage!==g){s=e.sessionStorage.getItem(u)}else{if(h.cookie!==g){s=h.cookie(u)}else{m.error(B.noCookieStorage)}}}if(s=="undefined"||s=="null"||s===g||s===null){s=g}return s},remove:function(s){var t=m.get.storageOptions();if(l.storageMethod=="localstorage"&&e.localStorage!==g){e.localStorage.removeItem(s)}else{if(l.storageMethod=="sessionstorage"&&e.sessionStorage!==g){e.sessionStorage.removeItem(s)}else{if(h.cookie!==g){h.removeCookie(s,t)}else{m.error(B.noStorage)}}}}},setting:function(t,s){m.debug("Changing setting",t,s);if(h.isPlainObject(t)){h.extend(true,l,t)}else{if(s!==g){if(h.isPlainObject(l[t])){h.extend(true,l[t],s)}else{l[t]=s}}else{return l[t]}}},internal:function(t,s){if(h.isPlainObject(t)){h.extend(true,m,t)}else{if(s!==g){m[t]=s}else{return m[t]}}},debug:function(){if(!l.silent&&l.debug){if(l.performance){m.performance.log(arguments)}else{m.debug=Function.prototype.bind.call(console.info,console,l.name+":");m.debug.apply(console,arguments)}}},verbose:function(){if(!l.silent&&l.verbose&&l.debug){if(l.performance){m.performance.log(arguments)}else{m.verbose=Function.prototype.bind.call(console.info,console,l.name+":");m.verbose.apply(console,arguments)}}},error:function(){if(!l.silent){m.error=Function.prototype.bind.call(console.error,console,l.name+":");m.error.apply(console,arguments)}},performance:{log:function(s){var t,v,u;if(l.performance){t=new Date().getTime();u=q||t;v=t-u;q=t;d.push({Name:s[0],Arguments:[].slice.call(s,1)||"",Element:i,"Execution Time":v})}clearTimeout(m.performance.timer);m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var s=l.name+":",t=0;q=false;clearTimeout(m.performance.timer);h.each(d,function(u,v){t+=v["Execution Time"]});s+=" "+t+"ms";if(o){s+=" '"+o+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(s);if(console.table){console.table(d)}else{h.each(d,function(u,v){console.log(v.Name+": "+v["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(u,w,F){var s=z,t,v,x;w=w||b;F=i||F;if(typeof u=="string"&&s!==g){u=u.split(/[\. ]/);t=u.length-1;h.each(u,function(E,I){var J=(E!=t)?I+u[E+1].charAt(0).toUpperCase()+u[E+1].slice(1):u;if(h.isPlainObject(s[J])&&(E!=t)){s=s[J]}else{if(s[J]!==g){v=s[J];return false}else{if(h.isPlainObject(s[I])&&(E!=t)){s=s[I]}else{if(s[I]!==g){v=s[I];return false}else{m.error(B.method,u);return false}}}}})}if(h.isFunction(v)){x=v.apply(F,w)}else{if(v!==g){x=v}}if(Array.isArray(p)){p.push(x)}else{if(p!==g){p=[p,x]}else{if(x!==g){p=x}}}return v}};if(r){if(z===g){m.initialize()}m.invoke(n)}else{if(z!==g){z.invoke("destroy")}m.initialize()}});return(p!==g)?p:this};h.fn.nag.settings={name:"Nag",silent:false,debug:false,verbose:false,performance:true,namespace:"Nag",persist:false,displayTime:0,animation:{show:"slide",hide:"slide"},context:false,detachable:false,expires:30,domain:false,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}};h.extend(h.easing,{easeOutQuad:function(d,c,j,a,b){return -a*(c/=b)*(c-2)+j}})})(jQuery,window,document);