/*!
 * # Fomantic-UI - Checkbox
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
;(function(h,e,f,g){h.isFunction=h.isFunction||function(a){return typeof a==="function"&&typeof a.nodeType!=="number"};e=(typeof e!="undefined"&&e.Math==Math)?e:(typeof self!="undefined"&&self.Math==Math)?self:Function("return this")();h.fn.checkbox=function(a){var c=h(this),o=c.selector||"",q=new Date().getTime(),d=[],n=arguments[0],r=(typeof n=="string"),b=[].slice.call(arguments,1),p;c.each(function(){var G=h.extend(true,{},h.fn.checkbox.settings,a),M=G.className,E=G.namespace,l=G.selector,L=G.error,j="."+E,O="module-"+E,I=h(this),J=h(this).children(l.label),K=h(this).children(l.input),F=K[0],m=false,P=false,k=I.data(O),N,i=this,H;H={initialize:function(){H.verbose("Initializing checkbox",G);H.create.label();H.bind.events();H.set.tabbable();H.hide.input();H.observeChanges();H.instantiate();H.setup()},instantiate:function(){H.verbose("Storing instance of module",H);k=H;I.data(O,H)},destroy:function(){H.verbose("Destroying module");H.unbind.events();H.show.input();I.removeData(O)},fix:{reference:function(){if(I.is(l.input)){H.debug("Behavior called on <input> adjusting invoked element");I=I.closest(l.checkbox);H.refresh()}}},setup:function(){H.set.initialLoad();if(H.is.indeterminate()){H.debug("Initial value is indeterminate");H.indeterminate()}else{if(H.is.checked()){H.debug("Initial value is checked");H.check()}else{H.debug("Initial value is unchecked");H.uncheck()}}H.remove.initialLoad()},refresh:function(){J=I.children(l.label);K=I.children(l.input);F=K[0]},hide:{input:function(){H.verbose("Modifying <input> z-index to be unselectable");K.addClass(M.hidden)}},show:{input:function(){H.verbose("Modifying <input> z-index to be selectable");K.removeClass(M.hidden)}},observeChanges:function(){if("MutationObserver" in e){N=new MutationObserver(function(s){H.debug("DOM tree modified, updating selector cache");H.refresh()});N.observe(i,{childList:true,subtree:true});H.debug("Setting up mutation observer",N)}},attachEvents:function(u,s){var t=h(u);s=h.isFunction(H[s])?H[s]:H.toggle;if(t.length>0){H.debug("Attaching checkbox events to element",u,s);t.on("click"+j,s)}else{H.error(L.notFound)}},preventDefaultOnInputTarget:function(){if(typeof event!=="undefined"&&h(event.target).is(l.input)){H.verbose("Preventing default check action after manual check action");event.preventDefault()}},event:{change:function(s){if(!H.should.ignoreCallbacks()){G.onChange.call(F)}},click:function(s){var t=h(s.target);if(t.is(l.input)){H.verbose("Using default check action on initialized checkbox");return}if(t.is(l.link)){H.debug("Clicking link inside checkbox, skipping toggle");return}H.toggle();K.focus();s.preventDefault()},keydown:function(u){var x=u.which,s={enter:13,space:32,escape:27,left:37,up:38,right:39,down:40};var v=H.get.radios(),t=v.index(I),w=v.length,y=false;if(x==s.left||x==s.up){y=(t===0?w:t)-1}else{if(x==s.right||x==s.down){y=t===w-1?0:t+1}}if(!H.should.ignoreCallbacks()&&y!==false){if(G.beforeUnchecked.apply(F)===false){H.verbose("Option not allowed to be unchecked, cancelling key navigation");return false}if(G.beforeChecked.apply(h(v[y]).children(l.input)[0])===false){H.verbose("Next option should not allow check, cancelling key navigation");return false}}if(x==s.escape){H.verbose("Escape key pressed blurring field");K.blur();P=true}else{if(!u.ctrlKey&&(x==s.space||(x==s.enter&&G.enableEnterKey))){H.verbose("Enter/space key pressed, toggling checkbox");H.toggle();P=true}else{P=false}}},keyup:function(s){if(P){s.preventDefault()}}},check:function(){if(!H.should.allowCheck()){return}H.debug("Checking checkbox",K);H.set.checked();if(!H.should.ignoreCallbacks()){G.onChecked.call(F);H.trigger.change()}H.preventDefaultOnInputTarget()},uncheck:function(){if(!H.should.allowUncheck()){return}H.debug("Unchecking checkbox");H.set.unchecked();if(!H.should.ignoreCallbacks()){G.onUnchecked.call(F);H.trigger.change()}H.preventDefaultOnInputTarget()},indeterminate:function(){if(H.should.allowIndeterminate()){H.debug("Checkbox is already indeterminate");return}H.debug("Making checkbox indeterminate");H.set.indeterminate();if(!H.should.ignoreCallbacks()){G.onIndeterminate.call(F);H.trigger.change()}},determinate:function(){if(H.should.allowDeterminate()){H.debug("Checkbox is already determinate");return}H.debug("Making checkbox determinate");H.set.determinate();if(!H.should.ignoreCallbacks()){G.onDeterminate.call(F);H.trigger.change()}},enable:function(){if(H.is.enabled()){H.debug("Checkbox is already enabled");return}H.debug("Enabling checkbox");H.set.enabled();if(!H.should.ignoreCallbacks()){G.onEnable.call(F);G.onEnabled.call(F);H.trigger.change()}},disable:function(){if(H.is.disabled()){H.debug("Checkbox is already disabled");return}H.debug("Disabling checkbox");H.set.disabled();if(!H.should.ignoreCallbacks()){G.onDisable.call(F);G.onDisabled.call(F);H.trigger.change()}},get:{radios:function(){var s=H.get.name();return h('input[name="'+s+'"]').closest(l.checkbox)},otherRadios:function(){return H.get.radios().not(I)},name:function(){return K.attr("name")}},is:{initialLoad:function(){return m},radio:function(){return(K.hasClass(M.radio)||K.attr("type")=="radio")},indeterminate:function(){return K.prop("indeterminate")!==g&&K.prop("indeterminate")},checked:function(){return K.prop("checked")!==g&&K.prop("checked")},disabled:function(){return K.prop("disabled")!==g&&K.prop("disabled")},enabled:function(){return !H.is.disabled()},determinate:function(){return !H.is.indeterminate()},unchecked:function(){return !H.is.checked()}},should:{allowCheck:function(){if(H.is.determinate()&&H.is.checked()&&!H.is.initialLoad()){H.debug("Should not allow check, checkbox is already checked");return false}if(!H.should.ignoreCallbacks()&&G.beforeChecked.apply(F)===false){H.debug("Should not allow check, beforeChecked cancelled");return false}return true},allowUncheck:function(){if(H.is.determinate()&&H.is.unchecked()&&!H.is.initialLoad()){H.debug("Should not allow uncheck, checkbox is already unchecked");return false}if(!H.should.ignoreCallbacks()&&G.beforeUnchecked.apply(F)===false){H.debug("Should not allow uncheck, beforeUnchecked cancelled");return false}return true},allowIndeterminate:function(){if(H.is.indeterminate()&&!H.is.initialLoad()){H.debug("Should not allow indeterminate, checkbox is already indeterminate");return false}if(!H.should.ignoreCallbacks()&&G.beforeIndeterminate.apply(F)===false){H.debug("Should not allow indeterminate, beforeIndeterminate cancelled");return false}return true},allowDeterminate:function(){if(H.is.determinate()&&!H.is.initialLoad()){H.debug("Should not allow determinate, checkbox is already determinate");return false}if(!H.should.ignoreCallbacks()&&G.beforeDeterminate.apply(F)===false){H.debug("Should not allow determinate, beforeDeterminate cancelled");return false}return true},ignoreCallbacks:function(){return(m&&!G.fireOnInit)}},can:{change:function(){return !(I.hasClass(M.disabled)||I.hasClass(M.readOnly)||K.prop("disabled")||K.prop("readonly"))},uncheck:function(){return(typeof G.uncheckable==="boolean")?G.uncheckable:!H.is.radio()}},set:{initialLoad:function(){m=true},checked:function(){H.verbose("Setting class to checked");I.removeClass(M.indeterminate).addClass(M.checked);if(H.is.radio()){H.uncheckOthers()}if(!H.is.indeterminate()&&H.is.checked()){H.debug("Input is already checked, skipping input property change");return}H.verbose("Setting state to checked",F);K.prop("indeterminate",false).prop("checked",true)},unchecked:function(){H.verbose("Removing checked class");I.removeClass(M.indeterminate).removeClass(M.checked);if(!H.is.indeterminate()&&H.is.unchecked()){H.debug("Input is already unchecked");return}H.debug("Setting state to unchecked");K.prop("indeterminate",false).prop("checked",false)},indeterminate:function(){H.verbose("Setting class to indeterminate");I.addClass(M.indeterminate);if(H.is.indeterminate()){H.debug("Input is already indeterminate, skipping input property change");return}H.debug("Setting state to indeterminate");K.prop("indeterminate",true)},determinate:function(){H.verbose("Removing indeterminate class");I.removeClass(M.indeterminate);if(H.is.determinate()){H.debug("Input is already determinate, skipping input property change");return}H.debug("Setting state to determinate");K.prop("indeterminate",false)},disabled:function(){H.verbose("Setting class to disabled");I.addClass(M.disabled);if(H.is.disabled()){H.debug("Input is already disabled, skipping input property change");return}H.debug("Setting state to disabled");K.prop("disabled","disabled")},enabled:function(){H.verbose("Removing disabled class");I.removeClass(M.disabled);if(H.is.enabled()){H.debug("Input is already enabled, skipping input property change");return}H.debug("Setting state to enabled");K.prop("disabled",false)},tabbable:function(){H.verbose("Adding tabindex to checkbox");if(K.attr("tabindex")===g){K.attr("tabindex",0)}}},remove:{initialLoad:function(){m=false}},trigger:{change:function(){var t=f.createEvent("HTMLEvents"),s=K[0];if(s){H.verbose("Triggering native change event");t.initEvent("change",true,false);s.dispatchEvent(t)}}},create:{label:function(){if(K.prevAll(l.label).length>0){K.prev(l.label).detach().insertAfter(K);H.debug("Moving existing label",J)}else{if(!H.has.label()){J=h("<label>").insertAfter(K);H.debug("Creating label",J)}}}},has:{label:function(){return(J.length>0)}},bind:{events:function(){H.verbose("Attaching checkbox events");I.on("click"+j,H.event.click).on("change"+j,H.event.change).on("keydown"+j,l.input,H.event.keydown).on("keyup"+j,l.input,H.event.keyup)}},unbind:{events:function(){H.debug("Removing events");I.off(j)}},uncheckOthers:function(){var s=H.get.otherRadios();H.debug("Unchecking other radios",s);s.removeClass(M.checked)},toggle:function(){if(!H.can.change()){if(!H.is.radio()){H.debug("Checkbox is read-only or disabled, ignoring toggle")}return}if(H.is.indeterminate()||H.is.unchecked()){H.debug("Currently unchecked");H.check()}else{if(H.is.checked()&&H.can.uncheck()){H.debug("Currently checked");H.uncheck()}}},setting:function(t,s){H.debug("Changing setting",t,s);if(h.isPlainObject(t)){h.extend(true,G,t)}else{if(s!==g){if(h.isPlainObject(G[t])){h.extend(true,G[t],s)}else{G[t]=s}}else{return G[t]}}},internal:function(t,s){if(h.isPlainObject(t)){h.extend(true,H,t)}else{if(s!==g){H[t]=s}else{return H[t]}}},debug:function(){if(!G.silent&&G.debug){if(G.performance){H.performance.log(arguments)}else{H.debug=Function.prototype.bind.call(console.info,console,G.name+":");H.debug.apply(console,arguments)}}},verbose:function(){if(!G.silent&&G.verbose&&G.debug){if(G.performance){H.performance.log(arguments)}else{H.verbose=Function.prototype.bind.call(console.info,console,G.name+":");H.verbose.apply(console,arguments)}}},error:function(){if(!G.silent){H.error=Function.prototype.bind.call(console.error,console,G.name+":");H.error.apply(console,arguments)}},performance:{log:function(t){var u,s,v;if(G.performance){u=new Date().getTime();v=q||u;s=u-v;q=u;d.push({Name:t[0],Arguments:[].slice.call(t,1)||"",Element:i,"Execution Time":s})}clearTimeout(H.performance.timer);H.performance.timer=setTimeout(H.performance.display,500)},display:function(){var s=G.name+":",t=0;q=false;clearTimeout(H.performance.timer);h.each(d,function(v,u){t+=u["Execution Time"]});s+=" "+t+"ms";if(o){s+=" '"+o+"'"}if((console.group!==g||console.table!==g)&&d.length>0){console.groupCollapsed(s);if(console.table){console.table(d)}else{h.each(d,function(v,u){console.log(u.Name+": "+u["Execution Time"]+"ms")})}console.groupEnd()}d=[]}},invoke:function(t,x,v){var w=k,s,u,y;x=x||b;v=i||v;if(typeof t=="string"&&w!==g){t=t.split(/[\. ]/);s=t.length-1;h.each(t,function(A,B){var z=(A!=s)?B+t[A+1].charAt(0).toUpperCase()+t[A+1].slice(1):t;if(h.isPlainObject(w[z])&&(A!=s)){w=w[z]}else{if(w[z]!==g){u=w[z];return false}else{if(h.isPlainObject(w[B])&&(A!=s)){w=w[B]}else{if(w[B]!==g){u=w[B];return false}else{H.error(L.method,t);return false}}}}})}if(h.isFunction(u)){y=u.apply(v,x)}else{if(u!==g){y=u}}if(Array.isArray(p)){p.push(y)}else{if(p!==g){p=[p,y]}else{if(y!==g){p=y}}}return u}};if(r){if(k===g){H.initialize()}H.invoke(n)}else{if(k!==g){k.invoke("destroy")}H.initialize()}});return(p!==g)?p:this};h.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:false,debug:false,verbose:true,performance:true,uncheckable:"auto",fireOnInit:false,enableEnterKey:true,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}})(jQuery,window,document);